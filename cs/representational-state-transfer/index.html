<!DOCTYPE html>
<html><head>
<title>Representational State Transfer</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="REST">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link rel="shortcut icon" href="/images/smile_favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">



<meta property="og:title" content="Representational State Transfer" />
<meta property="og:description" content="REST" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.openheart.icu/cs/representational-state-transfer/" />
<meta property="article:published_time" content="2021-12-01T14:28:00+00:00" />
<meta property="article:modified_time" content="2021-12-01T14:28:00+00:00" /><meta property="og:site_name" content="My Blog" />





<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Representational State Transfer"/>
<meta name="twitter:description" content="REST"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  






<link rel="stylesheet" href="https://www.openheart.icu/scss/journal.min.501d7307b277cc4885da27e54d8eb3a01eb04a3eb1539d4db0f640bad47a803c.css" integrity="sha256-UB1zB7J3zEiF2iflTY6zoB6wSj6xU51NsPZAutR6gDw=" media="screen">



<link rel="stylesheet" href="https://www.openheart.icu/scss/dark-mode.min.7757e4001197b1cd1c03bf75eeef947c882e0bbc26b5096a3c1a66992f55521a.css" integrity="sha256-d1fkABGXsc0cA7917u&#43;UfIguC7wmtQlqPBpmmS9VUho=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
  clientID: '78028e4d522031d4773c',
  clientSecret: 'e387ce8646bde4df55f81e9dc6c1e72b91248d82',
  repo: '42th-openheart',
  owner: 'KrisNie',
  admin: ['KrisNie'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>












</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://www.openheart.icu/">
    
        <div class="nav-title">
            42th openheart
        </div>
        
        <div class="nav-subtitle">
            Kris Nie&#39;s Blog.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/arithmetic">
                Arithmetic
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/cs">
                ComputerScience
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/dotnet">
                DotNet
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/finance">
                Finance
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/speech">
                Speech
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                About
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        


<i class="fa fa-weixin" aria-hidden="true"></i>
QuadragintaDuo
<br>
<i class="fa fa-envelope" aria-hidden="true"></i>
krisnie42@qq.com
<br>
<span id="busuanzi_container_site_pv">
    site pv:<span id="busuanzi_value_site_pv"></span>
</span>
| 
<span id="busuanzi_container_site_uv">
	site uv:<span id="busuanzi_value_site_uv"></span>
</span>
<br>
<a href="https://beian.miit.gov.cn/">鲁ICP备20007116号-1</a>
<br>
Powered by Hugo | Theme - <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>

<br>


&copy;
	
	2021 ALL RIGHTS RESERVED KRIS NIE
	


    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#whats-rest" onclick="onNavClick(`#whats-rest-nav`)" id="whats-rest-nav">
									What’s REST?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#resource" onclick="onNavClick(`#resource-nav`)" id="resource-nav">
									Resource
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#representation" onclick="onNavClick(`#representation-nav`)" id="representation-nav">
									Representation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#state" onclick="onNavClick(`#state-nav`)" id="state-nav">
									State
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#transfer" onclick="onNavClick(`#transfer-nav`)" id="transfer-nav">
									Transfer
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#related-concepts" onclick="onNavClick(`#related-concepts-nav`)" id="related-concepts-nav">
									Related concepts
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#uniform-interface" onclick="onNavClick(`#uniform-interface-nav`)" id="uniform-interface-nav">
									Uniform Interface
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#hypertext-driven" onclick="onNavClick(`#hypertext-driven-nav`)" id="hypertext-driven-nav">
									Hypertext Driven
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#self-descriptive-messages" onclick="onNavClick(`#self-descriptive-messages-nav`)" id="self-descriptive-messages-nav">
									Self-Descriptive Messages
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#restful-system" onclick="onNavClick(`#restful-system-nav`)" id="restful-system-nav">
									RESTful System
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#client-server" onclick="onNavClick(`#client-server-nav`)" id="client-server-nav">
									Client-Server
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#stateless" onclick="onNavClick(`#stateless-nav`)" id="stateless-nav">
									Stateless
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cacheability" onclick="onNavClick(`#cacheability-nav`)" id="cacheability-nav">
									Cacheability
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#layered-system" onclick="onNavClick(`#layered-system-nav`)" id="layered-system-nav">
									Layered System
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#uniform-interface-1" onclick="onNavClick(`#uniform-interface-1-nav`)" id="uniform-interface-1-nav">
									Uniform Interface
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#code-on-demandhttpsenwikipediaorgwikicode_on_demand" onclick="onNavClick(`#code-on-demandhttpsenwikipediaorgwikicode_on_demand-nav`)" id="code-on-demandhttpsenwikipediaorgwikicode_on_demand-nav">
									Code-On-Demand
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#richardson-maturity-modelhttpsmartinfowlercomarticlesrichardsonmaturitymodelhtml" onclick="onNavClick(`#richardson-maturity-modelhttpsmartinfowlercomarticlesrichardsonmaturitymodelhtml-nav`)" id="richardson-maturity-modelhttpsmartinfowlercomarticlesrichardsonmaturitymodelhtml-nav">
									Richardson Maturity Model
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8c%bb%e7%94%9f%e9%a2%84%e7%ba%a6%e7%b3%bb%e7%bb%9f" onclick="onNavClick(`#医生预约系统-nav`)" id="医生预约系统-nav">
									医生预约系统
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#level-0" onclick="onNavClick(`#level-0-nav`)" id="level-0-nav">
									Level 0
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#level-1" onclick="onNavClick(`#level-1-nav`)" id="level-1-nav">
									Level 1
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#level-2" onclick="onNavClick(`#level-2-nav`)" id="level-2-nav">
									Level 2
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#level-3" onclick="onNavClick(`#level-3-nav`)" id="level-3-nav">
									Level 3
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#deficiencies-and-controversies" onclick="onNavClick(`#deficiencies-and-controversies-nav`)" id="deficiencies-and-controversies-nav">
									Deficiencies and controversies
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#reference" onclick="onNavClick(`#reference-nav`)" id="reference-nav">
									Reference
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/arithmetic">
                    Arithmetic
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/cs">
                    ComputerScience
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/dotnet">
                    DotNet
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/finance">
                    Finance
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/speech">
                    Speech
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    About
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#whats-rest" onclick="onNavClick(`#whats-rest-nav`)" id="whats-rest-nav">
									What’s REST?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#resource" onclick="onNavClick(`#resource-nav`)" id="resource-nav">
									Resource
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#representation" onclick="onNavClick(`#representation-nav`)" id="representation-nav">
									Representation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#state" onclick="onNavClick(`#state-nav`)" id="state-nav">
									State
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#transfer" onclick="onNavClick(`#transfer-nav`)" id="transfer-nav">
									Transfer
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#related-concepts" onclick="onNavClick(`#related-concepts-nav`)" id="related-concepts-nav">
									Related concepts
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#uniform-interface" onclick="onNavClick(`#uniform-interface-nav`)" id="uniform-interface-nav">
									Uniform Interface
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#hypertext-driven" onclick="onNavClick(`#hypertext-driven-nav`)" id="hypertext-driven-nav">
									Hypertext Driven
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#self-descriptive-messages" onclick="onNavClick(`#self-descriptive-messages-nav`)" id="self-descriptive-messages-nav">
									Self-Descriptive Messages
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#restful-system" onclick="onNavClick(`#restful-system-nav`)" id="restful-system-nav">
									RESTful System
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#client-server" onclick="onNavClick(`#client-server-nav`)" id="client-server-nav">
									Client-Server
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#stateless" onclick="onNavClick(`#stateless-nav`)" id="stateless-nav">
									Stateless
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cacheability" onclick="onNavClick(`#cacheability-nav`)" id="cacheability-nav">
									Cacheability
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#layered-system" onclick="onNavClick(`#layered-system-nav`)" id="layered-system-nav">
									Layered System
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#uniform-interface-1" onclick="onNavClick(`#uniform-interface-1-nav`)" id="uniform-interface-1-nav">
									Uniform Interface
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#code-on-demandhttpsenwikipediaorgwikicode_on_demand" onclick="onNavClick(`#code-on-demandhttpsenwikipediaorgwikicode_on_demand-nav`)" id="code-on-demandhttpsenwikipediaorgwikicode_on_demand-nav">
									Code-On-Demand
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#richardson-maturity-modelhttpsmartinfowlercomarticlesrichardsonmaturitymodelhtml" onclick="onNavClick(`#richardson-maturity-modelhttpsmartinfowlercomarticlesrichardsonmaturitymodelhtml-nav`)" id="richardson-maturity-modelhttpsmartinfowlercomarticlesrichardsonmaturitymodelhtml-nav">
									Richardson Maturity Model
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8c%bb%e7%94%9f%e9%a2%84%e7%ba%a6%e7%b3%bb%e7%bb%9f" onclick="onNavClick(`#医生预约系统-nav`)" id="医生预约系统-nav">
									医生预约系统
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#level-0" onclick="onNavClick(`#level-0-nav`)" id="level-0-nav">
									Level 0
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#level-1" onclick="onNavClick(`#level-1-nav`)" id="level-1-nav">
									Level 1
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#level-2" onclick="onNavClick(`#level-2-nav`)" id="level-2-nav">
									Level 2
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#level-3" onclick="onNavClick(`#level-3-nav`)" id="level-3-nav">
									Level 3
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#deficiencies-and-controversies" onclick="onNavClick(`#deficiencies-and-controversies-nav`)" id="deficiencies-and-controversies-nav">
									Deficiencies and controversies
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#reference" onclick="onNavClick(`#reference-nav`)" id="reference-nav">
									Reference
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://www.openheart.icu/">
            42th openheart
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://www.openheart.icu/">
        <div class="single-column-header-title">42th openheart</div>
        
        <div class="single-column-header-subtitle">Kris Nie&#39;s Blog.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    Representational State Transfer
                    
                    <div class="post-subtitle">
                        REST
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2021-12-01 14:28
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/technical">Technical</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/cs">CS</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            36 min
                            
                            58 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="whats-rest">What&rsquo;s REST?</h1>
<p>Representational State Transfer, 表征状态转移</p>
<blockquote>
<p>比较容易理解 REST 思想的途径是先理解什么是 HTTP，再配合一些实际例子来进行类比，你会发现“REST”（<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer）实际上是“HTT”（<strong>H</strong>yper<strong>t</strong>ext <strong>T</strong>ransfer）的进一步抽象，两者就如同接口与实现类的关系一般。</p>
</blockquote>
<p><strong>Hypertext</strong>:</p>
<blockquote>
<p>By now the word &ldquo;hypertext&rdquo; has become generally accepted for branching and responding text, but the corresponding word &ldquo;hypermedia&rdquo;, meaning complexes of branching and responding graphics, movies and sound – as well as text – is much less used.</p>
<p>现在，&ldquo;超文本 &ldquo;一词已被普遍接受，它指的是能够进行分支判断和差异响应的文本，相应地， &ldquo;超媒体 &ldquo;一词指的是能够进行分支判断和差异响应的图形、电影和声音（也包括文本）的复合体。</p>
<p>—— Theodor Holm Nelson <a href="https://en.wikipedia.org/wiki/Literary_Machines">Literary Machines</a>, 1992</p>
</blockquote>
<h2 id="resource">Resource</h2>
<blockquote>
<p><strong>资源</strong>：譬如你现在正在阅读一篇有关REST的文章，这篇文章的内容本身（你可以将其理解为其蕴含的信息、数据）我们称之为“资源”。无论你是购买的书籍、是在浏览器看的网页、是打印出来看的文稿、是在电脑屏幕上阅读抑或是手机上浏览，尽管呈现的样子各不相同，但其中的信息是不变的，你所阅读的仍是同一份“资源”。</p>
</blockquote>
<h2 id="representation">Representation</h2>
<blockquote>
<p><strong>表征</strong>：当你通过电脑浏览器阅读文章时，浏览器向服务端发出请求“我需要这个资源的 HTML 格式”，服务端向浏览器返回的这个 HTML 就被称之为“表征”，你可能通过其他方式拿到本文的 PDF、Markdown、RSS 等其他形式的版本，它们也同样是一个资源的多种表征。可见“表征”这个概念是指信息与用户交互时的表示形式，这与我们软件分层架构中常说的“表示层”（Presentation Layer）的语义其实是一致的。</p>
</blockquote>
<h2 id="state">State</h2>
<blockquote>
<p><strong>状态</strong>：当你读完了这篇文章，想看后面是什么内容时，你向服务器发出请求“给我下一篇文章”。但是“下一篇”是个相对概念，必须依赖“当前你正在阅读的文章是哪一篇”才能正确回应，这类在特定语境中才能产生的上下文信息即被称为“状态”。我们所说的有状态（Stateful）抑或是无状态（Stateless），都是只相对于服务端来说的，服务器要完成“取下一篇”的请求，要么自己记住用户的状态：这个用户现在阅读的是哪一篇文章，这称为有状态；要么客户端来记住状态，在请求的时候明确告诉服务器：我正在阅读某某文章，现在要读它的下一篇，这称为无状态。</p>
</blockquote>
<h2 id="transfer">Transfer</h2>
<blockquote>
<p><strong>转移</strong>：无论状态是由服务端还是客户端来提供的，“取下一篇文章”这个行为逻辑必然只能由服</p>
</blockquote>
<h2 id="related-concepts">Related concepts</h2>
<h3 id="uniform-interface">Uniform Interface</h3>
<blockquote>
<p><strong>统一接口</strong>：上面说的服务器“通过某种方式”让表征状态发生转移，具体是什么方式？如果你真的是用浏览器阅读本文电子版的话，请把本文滚动到结尾处，右下角有下一篇文章的 URI 超链接地址，这是服务端渲染这篇文章时就预置好的，点击它让页面跳转到下一篇，就是所谓“某种方式”的其中一种方式。任何人都不会对点击超链接网页会出现跳转感到奇怪，但你细想一下，URI 的含义是统一资源标识符，是一个名词，如何能表达出“转移”动作的含义呢？答案是 HTTP 协议中已经提前约定好了一套“统一接口”，它包括：GET、HEAD、POST、PUT、DELETE、TRACE、OPTIONS 七种基本操作，任何一个支持 HTTP 协议的服务器都会遵守这套规定，对特定的 URI 采取这些操作，服务器就会触发相应的表征状态转移。</p>
</blockquote>
<h3 id="hypertext-driven">Hypertext Driven</h3>
<blockquote>
<p><strong>超文本驱动</strong>：尽管表征状态转移是由浏览器主动向服务器发出请求所引发的，该请求导致了“在浏览器屏幕上显示出了下一篇文章的内容”这个结果的出现。但是，你我都清楚这不可能真的是浏览器的主动意图，浏览器是根据用户输入的 URI 地址来找到网站首页，服务器给予的首页超文本内容后，浏览器再通过超文本内部的链接来导航到了这篇文章，阅读结束时，也是通过超文本内部的链接来再导航到下一篇。浏览器作为所有网站的通用的客户端，任何网站的导航（状态转移）行为都不可能是预置于浏览器代码之中，而是由服务器发出的请求响应信息（超文本）来驱动的。这点与其他带有客户端的软件有十分本质的区别，在那些软件中，业务逻辑往往是预置于程序代码之中的，有专门的页面控制器（无论在服务端还是在客户端中）来驱动页面的状态转移。</p>
</blockquote>
<h3 id="self-descriptive-messages">Self-Descriptive Messages</h3>
<blockquote>
<p><strong>自描述消息</strong>：由于资源的表征可能存在多种不同形态，在消息中应当有明确的信息来告知客户端该消息的类型以及应如何处理这条消息。一种被广泛采用的自描述方法是在名为“Content-Type”的 HTTP Header 中标识出<a href="https://en.wikipedia.org/wiki/Media_type">互联网媒体类型</a>（MIME type），譬如“Content-Type : application/json; charset=utf-8”，则说明该资源会以 JSON 的格式来返回，请使用 UTF-8 字符集进行处理。</p>
</blockquote>
<h1 id="restful-system">RESTful System</h1>
<blockquote>
<p>Traditionally, people design RPC APIs in terms of API interfaces and methods, such as CORBA and Windows COM. As time goes by, more and more interfaces and methods are introduced. The end result can be an overwhelming number of interfaces and methods, each of them different from the others. Developers have to learn each one carefully in order to use it correctly, which can be both time consuming and error prone</p>
<p>以前，人们面向方法去设计 RPC API，譬如 CORBA 和 DCOM，随着时间推移，接口与方法越来越多却又各不相同，开发人员必须了解每一个方法才能正确使用它们，这样既耗时又容易出错。</p>
</blockquote>
<p>—— <a href="https://cloud.google.com/apis/design">Google API Design Guide</a>, 2017</p>
<p>Fielding 认为，一套理想的、完全满足 REST 风格的系统应该满足以下六大原则</p>
<h2 id="client-server">Client-Server</h2>
<blockquote>
<p><strong>服务端与客户端分离</strong>：将用户界面所关注的逻辑和数据存储所关注的逻辑分离开来，有助于提高用户界面的跨平台的可移植性，这一点正越来越受到广大开发者所认可，以前完全基于服务端控制和渲染（如 JSF 这类）框架实际用户已甚少，而在服务端进行界面控制（Controller），通过服务端或者客户端的模版渲染引擎来进行界面渲染的框架（如 Struts、SpringMVC 这类）也受到了颇大的冲击。这一点主要推动力量与 REST 可能关系并不大，前端技术（从 ES 规范，到语言实现，到前端框架等）的近年来的高速发展，使得前端表达能力大幅度加强才是真正的幕后推手。由于前端的日渐强势，现在还流行起由前端代码反过来驱动服务端进行渲染的 SSR（Server-Side Rendering）技术，在 Serverless、SEO 等场景中已经占领了一块领地。</p>
</blockquote>
<h2 id="stateless">Stateless</h2>
<blockquote>
<p><strong>无状态</strong>：无状态是 REST 的一条核心原则，部分开发者在做服务接口规划时，觉得 REST 风格的服务怎么设计都感觉别扭，很有可能的一种原因是在服务端持有着比较重的状态。REST 希望服务器不要去负责维护状态，每一次从客户端发送的请求中，应包括所有的必要的上下文信息，会话信息也由客户端负责保存维护，服务端依据客户端传递的状态来执行业务处理逻辑，驱动整个应用的状态变迁。客户端承担状态维护职责以后，会产生一些新的问题，譬如身份认证、授权等可信问题，它们都应有针对性的解决方案（这部分内容可参见“<a href="http://icyfenix.cn/architect-perspective/general-architecture/system-security">安全架构</a>”的内容）。
但必须承认的现状是，目前大多数的系统都达不到这个要求，往往越复杂、越大型的系统越是如此。服务端无状态可以在分布式计算中获得非常高价值的好处，但大型系统的上下文状态数量完全可能膨胀到让客户端在每次请求时提供变得不切实际的程度，在服务端的内存、会话、数据库或者缓存等地方持有一定的状态成为一种是事实上存在，并将长期存在、被广泛使用的主流的方案。</p>
</blockquote>
<h2 id="cacheability">Cacheability</h2>
<blockquote>
<p><strong>可缓存</strong>：无状态服务虽然提升了系统的可见性、可靠性和可伸缩性，但降低了系统的网络性。“降低网络性”的通俗解释是某个功能如果使用有状态的设计只需要一次（或少量）请求就能完成，使用无状态的设计则可能会需要多次请求，或者在请求中带有额外冗余的信息。为了缓解这个矛盾，REST 希望软件系统能够如同万维网一样，允许客户端和中间的通讯传递者（譬如代理）将部分服务端的应答缓存起来。当然，为了缓存能够正确地运作，服务端的应答中必须明确地或者间接地表明本身是否可以进行缓存、可以缓存多长时间，以避免客户端在将来进行请求的时候得到过时的数据。运作良好的缓存机制可以减少客户端、服务器之间的交互，甚至有些场景中可以完全避免交互，这就进一步提高了性能。</p>
</blockquote>
<h2 id="layered-system">Layered System</h2>
<blockquote>
<p><strong>分层系统</strong>：这里所指的并不是表示层、服务层、持久层这种意义上的分层。而是指客户端一般不需要知道是否直接连接到了最终的服务器，抑或连接到路径上的中间服务器。中间服务器可以通过负载均衡和共享缓存的机制提高系统的可扩展性，这样也便于缓存、伸缩和安全策略的部署。该原则的典型的应用是内容分发网络（Content Distribution Network，CDN）。如果你是通过网站浏览到这篇文章的话，你所发出的请求一般（假设你在中国国境内的话）并不是直接访问位于 GitHub Pages 的源服务器，而是访问了位于国内的 CDN 服务器，但作为用户，你完全不需要感知到这一点。我们将在“<a href="http://icyfenix.cn/architect-perspective/general-architecture/diversion-system">透明多级分流系统</a>”中讨论如何构建自动的、可缓存的分层系统。</p>
</blockquote>
<h2 id="uniform-interface-1">Uniform Interface</h2>
<blockquote>
<p><strong>统一接口</strong>：这是 REST 的另一条核心原则，REST 希望开发者面向资源编程，希望软件系统设计的重点放在抽象系统该有哪些资源上，而不是抽象系统该有哪些行为（服务）上。这条原则你可以类比计算机中对文件管理的操作来理解，管理文件可能会进行创建、修改、删除、移动等操作，这些操作数量是可数的，而且对所有文件都是固定的、统一的。如果面向资源来设计系统，同样会具有类似的操作特征，由于 REST 并没有设计新的协议，所以这些操作都借用了 HTTP 协议中固有的操作命令来完成。
统一接口也是 REST 最容易陷入争论的地方，基于网络的软件系统，到底是面向资源更好，还是面向服务更合适，这事情哪怕是很长时间里都不会有个定论，也许永远都没有。但是，已经有一个基本清晰的结论是：<strong>面向资源编程的抽象程度通常更高</strong>。抽象程度高意味着坏处是往往距离人类的思维方式更远，而好处是往往通用程度会更好。用这样的语言去诠释 REST，大概本身就挺抽象的。</p>
<p>譬如，几乎每个系统都有的登录和注销功能，如果你理解成登录对应于 login()服务，注销对应于 logout()服务这样两个独立服务，这是“符合人类思维”的；如果你理解成登录是 PUT Session，注销是 DELETE Session，这样你只需要设计一种“Session 资源”即可满足需求，甚至以后对 Session 的其他需求，如查询登陆用户的信息，就是 GET Session 而已，其他操作如修改用户信息等都可以被这同一套设计囊括在内，这便是“抽象程度更高”带来的好处。
想要在架构设计中合理恰当地利用统一接口，Fielding 建议系统应能做到每次请求中都包含资源的 ID，所有操作均通过资源 ID 来进行；建议每个资源都应该是自描述的消息；建议通过超文本来驱动应用状态的转移。</p>
</blockquote>
<h2 id="code-on-demandhttpsenwikipediaorgwikicode_on_demand"><a href="https://en.wikipedia.org/wiki/Code_on_demand">Code-On-Demand</a></h2>
<blockquote>
<p><strong>按需代码</strong>：按需代码被 Fielding 列为一条可选原则。它是指任何按照客户端（譬如浏览器）的请求，将可执行的软件程序从服务器发送到客户端的技术，按需代码赋予了客户端无需事先知道所有来自服务端的信息应该如何处理、如何运行的宽容度。举个具体例子，以前的<a href="https://en.wikipedia.org/wiki/Java_applet">Java Applet</a>技术，今天的<a href="https://en.wikipedia.org/wiki/WebAssembly">WebAssembly</a>等都属于典型的按需代码，蕴含着具体执行逻辑的代码是存放在服务端，只有当客户端请求了某个 Java Applet 之后，代码才会被传输并在客户端机器中运行，结束后通常也会随即在客户端中被销毁掉。将按需代码列为可选原则的原因并非是它特别难以达到，而更多是出于必要性和性价比的实际考虑。</p>
</blockquote>
<h1 id="richardson-maturity-modelhttpsmartinfowlercomarticlesrichardsonmaturitymodelhtml"><a href="https://martinfowler.com/articles/richardsonMaturityModel.html">Richardson Maturity Model</a></h1>
<p>Richardson 将服务接口“REST 的程度”从低到高，分为 0 至 3 级：</p>
<ol>
<li>The Swamp of <a href="https://en.wikipedia.org/wiki/Plain_Old_XML">Plain Old XML</a>：完全不 REST。另外，关于 Plain Old XML 这说法，SOAP 表示感觉有被冒犯到。</li>
<li>Resources：开始引入资源的概念。</li>
<li>HTTP Verbs：引入统一接口，映射到 HTTP 协议的方法上。</li>
<li>Hypermedia Controls：超媒体控制在本文里面的说法是“超文本驱动”，在 Fielding 论文里的说法是“Hypertext As The Engine Of Application State，HATEOAS”，其实都是指同一件事情。</li>
</ol>
<p>假设你是一名软件工程师，接到需求（原文中的需求复杂一些，这里简化了）的 UserStory 描述是这样的：</p>
<h2 id="医生预约系统">医生预约系统</h2>
<p>作为一名病人，我想要从系统中得知指定日期内我熟悉的医生是否具有空闲时间，以便于我向该医生预约就诊。</p>
<h3 id="level-0">Level 0</h3>
<blockquote>
<p>医院开放了一个<code>/appointmentService</code>的 Web API，传入日期、医生姓名作为参数，可以得到该时间段该名医生的空闲时间，该 API 的一次 HTTP 调用如下所示：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#008b45">POST</span> <span style="color:#008b45;text-decoration:underline">/appointmentService?action=query</span> <span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span>

{date: &#34;2020-03-04&#34;, doctor: &#34;mjones&#34;}
</code></pre></div><p>然后服务器会传回一个包含了所需信息的回应：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">200</span> <span style="color:#008b45;font-weight:bold">OK</span>

[
	{start:&#34;14:00&#34;, end: &#34;14:50&#34;, doctor: &#34;mjones&#34;},
	{start:&#34;16:00&#34;, end: &#34;16:50&#34;, doctor: &#34;mjones&#34;}
]
</code></pre></div><p>得到了医生空闲的结果后，我觉得 14:00 的时间比较合适，于是进行预约确认，并提交了我的基本信息：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#008b45">POST</span> <span style="color:#008b45;text-decoration:underline">/appointmentService?action=confirm</span> <span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span>

{
	appointment: {date: &#34;2020-03-04&#34;, start:&#34;14:00&#34;, doctor: &#34;mjones&#34;},
	patient: {name: icyfenix, age: 30, ……}
}
</code></pre></div><p>如果预约成功，那我能够收到一个预约成功的响应：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">200</span> <span style="color:#008b45;font-weight:bold">OK</span>

{
	code: 0,
	message: &#34;Successful confirmation of appointment&#34;
}
</code></pre></div><p>如果发生了问题，譬如有人在我前面抢先预约了，那么我会在响应中收到某种错误信息：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">200</span> <span style="color:#008b45;font-weight:bold">OK</span>

{
	code: 1
	message: &#34;doctor not available&#34;
}
</code></pre></div><p>到此，整个预约服务宣告完成。</p>
</blockquote>
<h3 id="level-1">Level 1</h3>
<blockquote>
<p>第 0 级是 RPC 的风格，如果需求永远不会变化，也不会增加，那它完全可以良好地工作下去。但是，如果你不想为预约医生之外的其他操作、为获取空闲时间之外的其他信息去编写额外的方法，或者改动现有方法的接口，那还是应该考虑一下如何使用 REST 来抽象资源。</p>
<p>通往 REST 的第一步是引入资源的概念，在 API 中基本的体现是围绕着资源而不是过程来设计服务，说的直白一点，可以理解为服务的 Endpoint 应该是一个名词而不是动词。此外，每次请求中都应包含资源的 ID，所有操作均通过资源 ID 来进行，譬如，获取医生指定时间的空闲档期：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#008b45">POST</span> <span style="color:#008b45;text-decoration:underline">/doctors/mjones</span> <span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span>

{date: &#34;2020-03-04&#34;}
</code></pre></div><p>然后服务器传回一组包含了 ID 信息的档期清单，注意，ID 是资源的唯一编号，有 ID 即代表“医生的档期”被视为一种资源：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">200</span> <span style="color:#008b45;font-weight:bold">OK</span>

[
	{id: 1234, start:&#34;14:00&#34;, end: &#34;14:50&#34;, doctor: &#34;mjones&#34;},
	{id: 5678, start:&#34;16:00&#34;, end: &#34;16:50&#34;, doctor: &#34;mjones&#34;}
]
</code></pre></div><p>我还是觉得 14:00 的时间比较合适，于是又进行预约确认，并提交了我的基本信息：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#008b45">POST</span> <span style="color:#008b45;text-decoration:underline">/schedules/1234</span> <span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span>

{name: icyfenix, age: 30, ……}
</code></pre></div><p>后面预约成功或者失败的响应消息在这个级别里面与之前一致，就不重复了。比起第 0 级，第 1 级的特征是引入了资源，通过资源 ID 作为主要线索与服务交互，但第 1 级至少还有三个问题并没有解决：一是只处理了查询和预约，如果我临时想换个时间，要调整预约，或者我的病忽然好了，想删除预约，这都需要提供新的服务接口。二是处理结果响应时，只能靠着结果中的<code>code</code>、<code>message</code>这些字段做分支判断，每一套服务都要设计可能发生错误的 code，这很难考虑全面，而且也不利于对某些通用的错误做统一处理；三是并没有考虑认证授权等安全方面的内容，譬如要求只有登陆用户才允许查询医生档期时间，某些医生可能只对 VIP 开放，需要特定级别的病人才能预约，等等。</p>
</blockquote>
<h3 id="level-2">Level 2</h3>
<blockquote>
<p>第 1 级遗留三个问题都可以靠引入统一接口来解决。HTTP 协议的七个标准方法是经过精心设计的，只要架构师的抽象能力够用，它们几乎能涵盖资源可能遇到的所有操作场景。REST 的做法是把不同业务需求抽象为对资源的增加、修改、删除等操作来解决第一个问题；使用 HTTP 协议的 Status Code，可以涵盖大多数资源操作可能出现的异常，而且 Status Code 可以自定义扩展，以此解决第二个问题；依靠 HTTP Header 中携带的额外认证、授权信息来解决第三个问题，这个在实战中并没有体现，请参考安全架构中的“<a href="http://icyfenix.cn/architect-perspective/general-architecture/system-security/credentials">凭证</a>”相关内容。</p>
<p>按这个思路，获取医生档期，应采用具有查询语义的 GET 操作进行：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#008b45">GET</span> <span style="color:#008b45;text-decoration:underline">/doctors/mjones/schedule?date=2020-03-04&amp;status=open</span> <span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span>
</code></pre></div><p>然后服务器会传回一个包含了所需信息的回应：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">200</span> <span style="color:#008b45;font-weight:bold">OK</span>

[
	{id: 1234, start:&#34;14:00&#34;, end: &#34;14:50&#34;, doctor: &#34;mjones&#34;},
	{id: 5678, start:&#34;16:00&#34;, end: &#34;16:50&#34;, doctor: &#34;mjones&#34;}
]
</code></pre></div><p>我仍然觉得 14:00 的时间比较合适，于是又进行预约确认，并提交了我的基本信息，用以创建预约，这是符合 POST 的语义的：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#008b45">POST</span> <span style="color:#008b45;text-decoration:underline">/schedules/1234</span> <span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span>

{name: icyfenix, age: 30, ……}
</code></pre></div><p>如果预约成功，那我能够收到一个预约成功的响应：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">201</span> <span style="color:#008b45;font-weight:bold">Created</span>

Successful confirmation of appointment
</code></pre></div><p>如果发生了问题，譬如有人在我前面抢先预约了，那么我会在响应中收到某种错误信息：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">409</span> <span style="color:#008b45;font-weight:bold">Conflict</span>

doctor not available
</code></pre></div></blockquote>
<h3 id="level-3">Level 3</h3>
<blockquote>
<p>第 2 级是目前绝大多数系统所到达的 REST 级别，但仍不是完美的，至少还存在一个问题：你是如何知道预约 mjones 医生的档期是需要访问<code>/schedules/1234</code>这个服务 Endpoint 的？也许你甚至第一时间无法理解为何我会有这样的疑问，这当然是程序代码写的呀！但 REST 并不认同这种已烙在程序员脑海中许久的想法。RMM 中的 Hypermedia Controls、Fielding 论文中的 HATEOAS 和现在提的比较多的“超文本驱动”，所希望的是除了第一个请求是有你在浏览器地址栏输入所驱动之外，其他的请求都应该能够自己描述清楚后续可能发生的状态转移，由超文本自身来驱动。所以，当你输入了查询的指令之后：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#008b45">GET</span> <span style="color:#008b45;text-decoration:underline">/doctors/mjones/schedule?date=2020-03-04&amp;status=open</span> <span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span>
</code></pre></div><p>服务器传回的响应信息应该包括诸如如何预约档期、如何了解医生信息等可能的后续操作：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#8b008b;font-weight:bold">HTTP</span>/<span style="color:#b452cd">1.1</span> <span style="color:#b452cd">200</span> <span style="color:#008b45;font-weight:bold">OK</span>

{
	schedules：[
		{
			id: 1234, start:&#34;14:00&#34;, end: &#34;14:50&#34;, doctor: &#34;mjones&#34;,
			links: [
				{rel: &#34;comfirm schedule&#34;, href: &#34;/schedules/1234&#34;}
			]
		},
		{
			id: 5678, start:&#34;16:00&#34;, end: &#34;16:50&#34;, doctor: &#34;mjones&#34;,
			links: [
				{rel: &#34;comfirm schedule&#34;, href: &#34;/schedules/5678&#34;}
			]
		}
	],
	links: [
		{rel: &#34;doctor info&#34;, href: &#34;/doctors/mjones/info&#34;}
	]
}
</code></pre></div><p>如果做到了第 3 级 REST，那服务端的 API 和客户端也是完全解耦的，你要调整服务数量，或者同一个服务做 API 升级将会变得非常简单。</p>
</blockquote>
<h1 id="deficiencies-and-controversies">Deficiencies and controversies</h1>
<ol>
<li>
<p>面向资源的编程思想只适合做 CRUD，面向过程、面向对象编程才能处理真正复杂的业务逻辑</p>
<blockquote>
<ul>
<li>面向过程编程时，为什么要以算法和处理过程为中心，输入数据，输出结果？当然是为了符合计算机世界中主流的交互方式。</li>
<li>面向对象编程时，为什么要将数据和行为统一起来、封装成对象？当然是为了符合现实世界的主流的交互方式。</li>
<li>面向资源编程时，为什么要将数据（资源）作为抽象的主体，把行为看作是统一的接口？当然是为了符合网络世界的主流的交互方式。</li>
</ul>
</blockquote>
</li>
<li>
<p>REST 与 HTTP 完全绑定，不适合应用于要求高性能传输的场景中</p>
<blockquote>
<p>对于需要直接控制传输，如二进制细节、编码形式、报文格式、连接方式等细节的场景中，REST 确实不合适，这些场景往往存在于服务集群的内部节点之间</p>
</blockquote>
</li>
<li>
<p>REST 不利于事务支持</p>
<blockquote>
<p>这个问题首先要看你怎么看待“事务（Transaction）”这个概念。如果“事务”指的是数据库那种的狭义的刚性 ACID 事务，那除非完全不持有状态，否则分布式系统本身与此就是有矛盾的（CAP 不可兼得），这是分布式的问题而不是 REST 的问题。如果“事务”是指通过服务协议或架构，在分布式服务中，获得对多个数据同时提交的统一协调能力（<strong>2PC/3PC</strong>），譬如<a href="http://docs.oasis-open.org/ws-tx/wstx-wsat-1.1-spec-errata-os/wstx-wsat-1.1-spec-errata-os.html">WS-AtomicTransaction</a>、<a href="http://docs.oasis-open.org/ws-tx/wstx-wscoor-1.1-spec-errata-os/wstx-wscoor-1.1-spec-errata-os.html">WS-Coordination</a>这样的功能性协议，这 REST 确实不支持，假如你已经理解了这样做的代价，仍决定要这样做的话，<strong>Web Service 是比较好的选择</strong>。</p>
</blockquote>
</li>
<li>
<p>REST 没有传输可靠性支持</p>
<blockquote>
<p>在 HTTP 中你发送出去一个请求，通常会收到一个与之相对的响应，譬如 HTTP/1.1 200 OK 或者 HTTP/1.1 404 Not Found 诸如此类的。但如果你没有收到任何响应，那就无法确定消息到底是没有发送出去，抑或是没有从服务端返回回来，这其中的关键差别是服务端到底是否被触发了某些处理？应对传输可靠性最简单粗暴的做法是把消息再重发一遍。这种简单处理能够成立的前提是服务应具有<a href="https://zh.wikipedia.org/wiki/%E5%86%AA%E7%AD%89">幂等性</a>（Idempotency），即服务被重复执行多次的效果与执行一次是相等的。</p>
</blockquote>
</li>
<li>
<p>REST 缺乏对资源进行“部分”和“批量”的处理能力</p>
<blockquote>
<p>譬如你仅仅想获得某个用户的姓名，RPC 风格中可以设计一个“getUsernameById”的服务，返回一个字符串，尽管这种服务的通用性实在称不上“设计”二字，但确实可以工作；而 REST 风格中你将向服务端请求整个用户对象，然后丢弃掉返回的结果中该用户除用户名外的其他属性，这便是一种“过度获取”（<a href="https://stackoverflow.com/questions/44564905/what-is-over-fetching-or-under-fetching">Overfetching</a>）。REST 的应对手段是通过位于中间节点或客户端的缓存来缓解这种问题，但此缺陷的本质是由于 HTTP 协议完全没有对请求资源的结构化描述能力（但有非结构化的部分内容获取能力，即今天多用于断点续传的<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Range_requests">Range Header</a>），所以返回资源的哪些内容、以什么数据类型返回等等，都不可能得到协议层面的支持，要做你就只能自己在 GET 方法的 Endpoint 上设计各种参数来实现。</p>
<p>譬如你准备把某个用户的名字增加一个“VIP”前缀，提交一个 PUT 请求修改这个用户的名称即可，而你要给 1000 个用户加 VIP 时，如果真的去调用 1000 次 PUT，浏览器会回应你 HTTP/1.1 429 Too Many Requests，老板则会揍你一顿。此时，你就不得不先创建一个（如名为“VIP-Modify-Task”）任务资源，把 1000 个用户的 ID 交给这个任务，最后驱动任务进入执行状态。又譬如你去网店买东西，下单、冻结库存、支付、加积分、扣减库存这一系列步骤会涉及到多个资源的变化，你可能面临不得不创建一种“事务”的抽象资源，或者用某种具体的资源（譬如“结算单”）贯穿这个过程的始终，每次操作其他资源时都带着事务或者结算单的 ID。HTTP 协议由于本身的无状态性，会相对不适应（并非不能够）处理这类业务场景。</p>
<p>目前，一种理论上较优秀的可以解决以上这几类问题的方案是<a href="https://graphql.cn/">GraphQL</a>，这是由 Facebook 提出并开源的一种面向资源 API 的数据查询语言，如同 SQL 一样，挂了个“查询语言”的名字，但其实 CRUD 都有涉猎。比起依赖 HTTP 无协议的 REST，GraphQL 可以说是另一种“有协议”的、更彻底地面向资源的服务方式。然而凡事都有两面，离开了 HTTP，它又面临着几乎所有 RPC 框架所遇到的那个如何推广交互接口的问题。</p>
</blockquote>
</li>
</ol>
<h1 id="reference">Reference</h1>
<ol>
<li>Roy Thomas Fielding, 2000, <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">Architectural Styles and the Design of Network-based Software Architectures</a></li>
<li><a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">Representational State Transfer (REST)</a></li>
<li>Theodor Holm Nelson, 1967, <a href="https://archive.org/details/SelectedPapers1977">Brief Words on the Hypertext</a></li>
<li><a href="https://cloud.google.com/apis/design">Google API Design Guide</a></li>
<li>Google, <a href="https://cloud.google.com/apis/design/custom_methods">Custom methods</a></li>
<li>Leonard Richardson, <a href="https://book.douban.com/subject/22139962/">RESTful Web APIs</a></li>
<li>Leonard Richardson, <a href="https://book.douban.com/subject/2054201/">RESTful Web Services</a></li>
</ol>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">Last modified on 2021-12-01</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts">
			Next<br>No newer posts.
                </a>
                
                
                
                <a class="older-posts" href="https://www.openheart.icu/cs/transactions/">
			Previous<br>Transactions
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>









            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
	
	<i class="fa fa-weixin" aria-hidden="true"></i>
	QuadragintaDuo
	<br>
	<i class="fa fa-envelope" aria-hidden="true"></i>
	krisnie42@qq.com
	<br>
		site pv:<span id="busuanzi_value_site_pv_m"></span>
	| 
		site uv:<span id="busuanzi_value_site_uv_m"></span>
	<br>
	鲁ICP备20007116号
	<br>
	Powered by Hugo | Theme - <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
	
	<br>
	
	
	&copy;
		
		2021 ALL RIGHTS RESERVED KRIS NIE
		
	<script>
		$(function(){
			$("#busuanzi_value_site_uv").bind('DOMNodeInserted',function(e){
				console.log('DOMNodeInserted');
				debugger;
				$('#busuanzi_value_site_uv_m').after($('#busuanzi_value_site_uv').text()); 
				$('#busuanzi_value_site_pv_m').after($('#busuanzi_value_site_pv').text());
			});
		})
	</script>
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
