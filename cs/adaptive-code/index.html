<!DOCTYPE html>
<html><head>
<title>Adaptive Code</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="自适应代码">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link rel="shortcut icon" href="/images/smile_favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">



<meta property="og:title" content="Adaptive Code" />
<meta property="og:description" content="自适应代码" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.openheart.icu/cs/adaptive-code/" />
<meta property="article:published_time" content="2020-11-21T22:30:12+00:00" />
<meta property="article:modified_time" content="2020-12-27T17:15:23+00:00" /><meta property="og:site_name" content="My Blog" />





<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Adaptive Code"/>
<meta name="twitter:description" content="自适应代码"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  






<link rel="stylesheet" href="https://www.openheart.icu/scss/journal.min.501d7307b277cc4885da27e54d8eb3a01eb04a3eb1539d4db0f640bad47a803c.css" integrity="sha256-UB1zB7J3zEiF2iflTY6zoB6wSj6xU51NsPZAutR6gDw=" media="screen">



<link rel="stylesheet" href="https://www.openheart.icu/scss/dark-mode.min.7757e4001197b1cd1c03bf75eeef947c882e0bbc26b5096a3c1a66992f55521a.css" integrity="sha256-d1fkABGXsc0cA7917u&#43;UfIguC7wmtQlqPBpmmS9VUho=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
  clientID: '78028e4d522031d4773c',
  clientSecret: 'e387ce8646bde4df55f81e9dc6c1e72b91248d82',
  repo: '42th-openheart',
  owner: 'KrisNie',
  admin: ['KrisNie'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>












</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://www.openheart.icu/">
    
        <div class="nav-title">
            42th openheart
        </div>
        
        <div class="nav-subtitle">
            Kris Nie&#39;s Blog.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/arithmetic">
                Arithmetic
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/cs">
                ComputerScience
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/dotnet">
                DotNet
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/finance">
                Finance
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/speech">
                Speech
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                About
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        


<i class="fa fa-weixin" aria-hidden="true"></i>
QuadragintaDuo
<br>
<i class="fa fa-envelope" aria-hidden="true"></i>
krisnie42@qq.com
<br>
<span id="busuanzi_container_site_pv">
    site pv:<span id="busuanzi_value_site_pv"></span>
</span>
| 
<span id="busuanzi_container_site_uv">
	site uv:<span id="busuanzi_value_site_uv"></span>
</span>
<br>
<a href="https://beian.miit.gov.cn/">鲁ICP备20007116号-1</a>
<br>
Powered by Hugo | Theme - <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>

<br>


&copy;
	
	2021 ALL RIGHTS RESERVED KRIS NIE
	


    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#adaptive-code-agile-coding-with-design-patterns-and-solid-principleshttpsgithubcomadaptivecode" onclick="onNavClick(`#adaptive-code-agile-coding-with-design-patterns-and-solid-principleshttpsgithubcomadaptivecode-nav`)" id="adaptive-code-agile-coding-with-design-patterns-and-solid-principleshttpsgithubcomadaptivecode-nav">
									Adaptive Code: Agile coding with design patterns and SOLID principles
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#scrum" onclick="onNavClick(`#scrum-nav`)" id="scrum-nav">
									Scrum
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#what" onclick="onNavClick(`#what-nav`)" id="what-nav">
									What
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#agile-software-development-%e6%95%8f%e6%8d%b7%e8%bd%af%e4%bb%b6%e5%bc%80%e5%8f%91%e4%b8%8escrum" onclick="onNavClick(`#agile-software-development-敏捷软件开发与scrum-nav`)" id="agile-software-development-敏捷软件开发与scrum-nav">
									Agile software development (敏捷软件开发)与Scrum
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#roles-and-responsibilities" onclick="onNavClick(`#roles-and-responsibilities-nav`)" id="roles-and-responsibilities-nav">
									Roles and responsibilities
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-scrum-board" onclick="onNavClick(`#the-scrum-board-nav`)" id="the-scrum-board-nav">
									The Scrum board
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#sprint-burndown-chart" onclick="onNavClick(`#sprint-burndown-chart-nav`)" id="sprint-burndown-chart-nav">
									Sprint burndown chart
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#product-backlog" onclick="onNavClick(`#product-backlog-nav`)" id="product-backlog-nav">
									Product backlog
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#sprint-planning" onclick="onNavClick(`#sprint-planning-nav`)" id="sprint-planning-nav">
									Sprint planning
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#stand-up-meeting" onclick="onNavClick(`#stand-up-meeting-nav`)" id="stand-up-meeting-nav">
									Stand-up meeting
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#why" onclick="onNavClick(`#why-nav`)" id="why-nav">
									Why
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cynefin-framework" onclick="onNavClick(`#cynefin-framework-nav`)" id="cynefin-framework-nav">
									Cynefin framework
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#scrum-versus-waterfall" onclick="onNavClick(`#scrum-versus-waterfall-nav`)" id="scrum-versus-waterfall-nav">
									Scrum versus waterfall
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#shortcoming" onclick="onNavClick(`#shortcoming-nav`)" id="shortcoming-nav">
									Shortcoming
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#how" onclick="onNavClick(`#how-nav`)" id="how-nav">
									How
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#kanban" onclick="onNavClick(`#kanban-nav`)" id="kanban-nav">
									Kanban
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#limiting-work-in-progress" onclick="onNavClick(`#limiting-work-in-progress-nav`)" id="limiting-work-in-progress-nav">
									Limiting work in progress
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#event-driven-ceremoniesmeeting" onclick="onNavClick(`#event-driven-ceremoniesmeeting-nav`)" id="event-driven-ceremoniesmeeting-nav">
									Event-driven ceremonies(meeting)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#classes-of-servicepriority" onclick="onNavClick(`#classes-of-servicepriority-nav`)" id="classes-of-servicepriority-nav">
									Classes of service(priority)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#analysis" onclick="onNavClick(`#analysis-nav`)" id="analysis-nav">
									Analysis
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#lead-time--cycle-time" onclick="onNavClick(`#lead-time--cycle-time-nav`)" id="lead-time--cycle-time-nav">
									Lead time &amp; Cycle time
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cumulative-flow-diagrams" onclick="onNavClick(`#cumulative-flow-diagrams-nav`)" id="cumulative-flow-diagrams-nav">
									Cumulative flow diagrams
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#dependencies-and-layering" onclick="onNavClick(`#dependencies-and-layering-nav`)" id="dependencies-and-layering-nav">
									Dependencies and layering
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#managing-dependencies" onclick="onNavClick(`#managing-dependencies-nav`)" id="managing-dependencies-nav">
									Managing dependencies
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#resolving-dependencies%e5%bb%ba%e8%ae%ae%e6%9c%97%e8%af%bb%e5%b9%b6%e8%83%8c%e8%af%b5" onclick="onNavClick(`#resolving-dependencies建议朗读并背诵-nav`)" id="resolving-dependencies建议朗读并背诵-nav">
									Resolving dependencies(建议朗读并背诵)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#services%e5%be%85%e6%b7%b1%e5%85%a5%e4%ba%86%e8%a7%a3" onclick="onNavClick(`#services待深入了解-nav`)" id="services待深入了解-nav">
									Services(待深入了解)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#layering" onclick="onNavClick(`#layering-nav`)" id="layering-nav">
									Layering
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cross-cutting-concerns%e5%88%87%e9%9d%a2" onclick="onNavClick(`#cross-cutting-concerns切面-nav`)" id="cross-cutting-concerns切面-nav">
									Cross-cutting concerns(切面)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#asymmetric-layering%e9%9d%9e%e5%af%b9%e7%a7%b0%e5%88%86%e5%b1%82" onclick="onNavClick(`#asymmetric-layering非对称分层-nav`)" id="asymmetric-layering非对称分层-nav">
									Asymmetric layering(非对称分层)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#interfaces-and-design-patterns" onclick="onNavClick(`#interfaces-and-design-patterns-nav`)" id="interfaces-and-design-patterns-nav">
									Interfaces and design patterns
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#diamond-inheritance-problem" onclick="onNavClick(`#diamond-inheritance-problem-nav`)" id="diamond-inheritance-problem-nav">
									Diamond inheritance problem
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#explicit-implementation" onclick="onNavClick(`#explicit-implementation-nav`)" id="explicit-implementation-nav">
									Explicit implementation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#polymorphism%e5%a4%9a%e6%80%81" onclick="onNavClick(`#polymorphism多态-nav`)" id="polymorphism多态-nav">
									Polymorphism(多态)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#adaptive-design-patterns" onclick="onNavClick(`#adaptive-design-patterns-nav`)" id="adaptive-design-patterns-nav">
									Adaptive design patterns
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#the-null-object-pattern" onclick="onNavClick(`#the-null-object-pattern-nav`)" id="the-null-object-pattern-nav">
									The Null Object pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-isnull-property-anti-pattern" onclick="onNavClick(`#the-isnull-property-anti-pattern-nav`)" id="the-isnull-property-anti-pattern-nav">
									The IsNull property anti-pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-adapter-pattern" onclick="onNavClick(`#the-adapter-pattern-nav`)" id="the-adapter-pattern-nav">
									The Adapter pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-strategy-pattern" onclick="onNavClick(`#the-strategy-pattern-nav`)" id="the-strategy-pattern-nav">
									The Strategy pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#further-versatility" onclick="onNavClick(`#further-versatility-nav`)" id="further-versatility-nav">
									Further versatility
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#testinghttpsdocsmicrosoftcomen-usvisualstudiotestviewvs-2019" onclick="onNavClick(`#testinghttpsdocsmicrosoftcomen-usvisualstudiotestviewvs-2019-nav`)" id="testinghttpsdocsmicrosoftcomen-usvisualstudiotestviewvs-2019-nav">
									Testing
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#unit-testing" onclick="onNavClick(`#unit-testing-nav`)" id="unit-testing-nav">
									Unit Testing
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#test-driven-development" onclick="onNavClick(`#test-driven-development-nav`)" id="test-driven-development-nav">
									Test-driven development
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-double" onclick="onNavClick(`#test-double-nav`)" id="test-double-nav">
									Test double
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#manual-test-fakery" onclick="onNavClick(`#manual-test-fakery-nav`)" id="manual-test-fakery-nav">
									Manual test fakery
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#mocking-frameworks" onclick="onNavClick(`#mocking-frameworks-nav`)" id="mocking-frameworks-nav">
									Mocking frameworks
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#testing-all-control-flows" onclick="onNavClick(`#testing-all-control-flows-nav`)" id="testing-all-control-flows-nav">
									Testing all control flows
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-setup" onclick="onNavClick(`#test-setup-nav`)" id="test-setup-nav">
									Test setup
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#writing-tests-first" onclick="onNavClick(`#writing-tests-first-nav`)" id="writing-tests-first-nav">
									Writing tests first
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#what-is-tdd" onclick="onNavClick(`#what-is-tdd-nav`)" id="what-is-tdd-nav">
									What is TDD?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-driven-design" onclick="onNavClick(`#test-driven-design-nav`)" id="test-driven-design-nav">
									Test-driven design
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-first-development" onclick="onNavClick(`#test-first-development-nav`)" id="test-first-development-nav">
									Test-first development
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#further-testing" onclick="onNavClick(`#further-testing-nav`)" id="further-testing-nav">
									Further testing
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#the-testing-pyramid" onclick="onNavClick(`#the-testing-pyramid-nav`)" id="the-testing-pyramid-nav">
									The testing pyramid
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-testing-quadrant" onclick="onNavClick(`#the-testing-quadrant-nav`)" id="the-testing-quadrant-nav">
									The testing quadrant
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#testing-for-prevention-and-cure" onclick="onNavClick(`#testing-for-prevention-and-cure-nav`)" id="testing-for-prevention-and-cure-nav">
									Testing for prevention and cure
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#how-do-you-decrease-mttr" onclick="onNavClick(`#how-do-you-decrease-mttr-nav`)" id="how-do-you-decrease-mttr-nav">
									How do you decrease MTTR?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#reference" onclick="onNavClick(`#reference-nav`)" id="reference-nav">
									Reference
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#refactoring" onclick="onNavClick(`#refactoring-nav`)" id="refactoring-nav">
									Refactoring
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#changing-existing-code" onclick="onNavClick(`#changing-existing-code-nav`)" id="changing-existing-code-nav">
									Changing existing code
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#replacing-magic-numbers-with-constants" onclick="onNavClick(`#replacing-magic-numbers-with-constants-nav`)" id="replacing-magic-numbers-with-constants-nav">
									Replacing “magic numbers” with constants
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#replacing-a-conditional-expression-with-polymorphism" onclick="onNavClick(`#replacing-a-conditional-expression-with-polymorphism-nav`)" id="replacing-a-conditional-expression-with-polymorphism-nav">
									Replacing a conditional expression with polymorphism
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#replacing-a-constructor-with-a-factory-method" onclick="onNavClick(`#replacing-a-constructor-with-a-factory-method-nav`)" id="replacing-a-constructor-with-a-factory-method-nav">
									Replacing a constructor with a factory method
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#replacing-inheritance-with-delegation" onclick="onNavClick(`#replacing-inheritance-with-delegation-nav`)" id="replacing-inheritance-with-delegation-nav">
									Replacing inheritance with delegation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#code-smell-refused-bequest" onclick="onNavClick(`#code-smell-refused-bequest-nav`)" id="code-smell-refused-bequest-nav">
									Code smell: Refused bequest
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#aggressive-refactoring" onclick="onNavClick(`#aggressive-refactoring-nav`)" id="aggressive-refactoring-nav">
									Aggressive refactoring
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#red-green-refactorredesign" onclick="onNavClick(`#red-green-refactorredesign-nav`)" id="red-green-refactorredesign-nav">
									Red, green, refactor…redesign
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#dependency-inversionhttpswwwopenhearticucsdependency-injection" onclick="onNavClick(`#dependency-inversionhttpswwwopenhearticucsdependency-injection-nav`)" id="dependency-inversionhttpswwwopenhearticucsdependency-injection-nav">
									Dependency inversion
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/arithmetic">
                    Arithmetic
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/cs">
                    ComputerScience
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/dotnet">
                    DotNet
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/finance">
                    Finance
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/speech">
                    Speech
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    About
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#adaptive-code-agile-coding-with-design-patterns-and-solid-principleshttpsgithubcomadaptivecode" onclick="onNavClick(`#adaptive-code-agile-coding-with-design-patterns-and-solid-principleshttpsgithubcomadaptivecode-nav`)" id="adaptive-code-agile-coding-with-design-patterns-and-solid-principleshttpsgithubcomadaptivecode-nav">
									Adaptive Code: Agile coding with design patterns and SOLID principles
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#scrum" onclick="onNavClick(`#scrum-nav`)" id="scrum-nav">
									Scrum
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#what" onclick="onNavClick(`#what-nav`)" id="what-nav">
									What
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#agile-software-development-%e6%95%8f%e6%8d%b7%e8%bd%af%e4%bb%b6%e5%bc%80%e5%8f%91%e4%b8%8escrum" onclick="onNavClick(`#agile-software-development-敏捷软件开发与scrum-nav`)" id="agile-software-development-敏捷软件开发与scrum-nav">
									Agile software development (敏捷软件开发)与Scrum
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#roles-and-responsibilities" onclick="onNavClick(`#roles-and-responsibilities-nav`)" id="roles-and-responsibilities-nav">
									Roles and responsibilities
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-scrum-board" onclick="onNavClick(`#the-scrum-board-nav`)" id="the-scrum-board-nav">
									The Scrum board
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#sprint-burndown-chart" onclick="onNavClick(`#sprint-burndown-chart-nav`)" id="sprint-burndown-chart-nav">
									Sprint burndown chart
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#product-backlog" onclick="onNavClick(`#product-backlog-nav`)" id="product-backlog-nav">
									Product backlog
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#sprint-planning" onclick="onNavClick(`#sprint-planning-nav`)" id="sprint-planning-nav">
									Sprint planning
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#stand-up-meeting" onclick="onNavClick(`#stand-up-meeting-nav`)" id="stand-up-meeting-nav">
									Stand-up meeting
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#why" onclick="onNavClick(`#why-nav`)" id="why-nav">
									Why
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cynefin-framework" onclick="onNavClick(`#cynefin-framework-nav`)" id="cynefin-framework-nav">
									Cynefin framework
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#scrum-versus-waterfall" onclick="onNavClick(`#scrum-versus-waterfall-nav`)" id="scrum-versus-waterfall-nav">
									Scrum versus waterfall
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#shortcoming" onclick="onNavClick(`#shortcoming-nav`)" id="shortcoming-nav">
									Shortcoming
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#how" onclick="onNavClick(`#how-nav`)" id="how-nav">
									How
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#kanban" onclick="onNavClick(`#kanban-nav`)" id="kanban-nav">
									Kanban
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#limiting-work-in-progress" onclick="onNavClick(`#limiting-work-in-progress-nav`)" id="limiting-work-in-progress-nav">
									Limiting work in progress
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#event-driven-ceremoniesmeeting" onclick="onNavClick(`#event-driven-ceremoniesmeeting-nav`)" id="event-driven-ceremoniesmeeting-nav">
									Event-driven ceremonies(meeting)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#classes-of-servicepriority" onclick="onNavClick(`#classes-of-servicepriority-nav`)" id="classes-of-servicepriority-nav">
									Classes of service(priority)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#analysis" onclick="onNavClick(`#analysis-nav`)" id="analysis-nav">
									Analysis
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#lead-time--cycle-time" onclick="onNavClick(`#lead-time--cycle-time-nav`)" id="lead-time--cycle-time-nav">
									Lead time &amp; Cycle time
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cumulative-flow-diagrams" onclick="onNavClick(`#cumulative-flow-diagrams-nav`)" id="cumulative-flow-diagrams-nav">
									Cumulative flow diagrams
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#dependencies-and-layering" onclick="onNavClick(`#dependencies-and-layering-nav`)" id="dependencies-and-layering-nav">
									Dependencies and layering
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#managing-dependencies" onclick="onNavClick(`#managing-dependencies-nav`)" id="managing-dependencies-nav">
									Managing dependencies
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#resolving-dependencies%e5%bb%ba%e8%ae%ae%e6%9c%97%e8%af%bb%e5%b9%b6%e8%83%8c%e8%af%b5" onclick="onNavClick(`#resolving-dependencies建议朗读并背诵-nav`)" id="resolving-dependencies建议朗读并背诵-nav">
									Resolving dependencies(建议朗读并背诵)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#services%e5%be%85%e6%b7%b1%e5%85%a5%e4%ba%86%e8%a7%a3" onclick="onNavClick(`#services待深入了解-nav`)" id="services待深入了解-nav">
									Services(待深入了解)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#layering" onclick="onNavClick(`#layering-nav`)" id="layering-nav">
									Layering
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cross-cutting-concerns%e5%88%87%e9%9d%a2" onclick="onNavClick(`#cross-cutting-concerns切面-nav`)" id="cross-cutting-concerns切面-nav">
									Cross-cutting concerns(切面)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#asymmetric-layering%e9%9d%9e%e5%af%b9%e7%a7%b0%e5%88%86%e5%b1%82" onclick="onNavClick(`#asymmetric-layering非对称分层-nav`)" id="asymmetric-layering非对称分层-nav">
									Asymmetric layering(非对称分层)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#interfaces-and-design-patterns" onclick="onNavClick(`#interfaces-and-design-patterns-nav`)" id="interfaces-and-design-patterns-nav">
									Interfaces and design patterns
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#diamond-inheritance-problem" onclick="onNavClick(`#diamond-inheritance-problem-nav`)" id="diamond-inheritance-problem-nav">
									Diamond inheritance problem
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#explicit-implementation" onclick="onNavClick(`#explicit-implementation-nav`)" id="explicit-implementation-nav">
									Explicit implementation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#polymorphism%e5%a4%9a%e6%80%81" onclick="onNavClick(`#polymorphism多态-nav`)" id="polymorphism多态-nav">
									Polymorphism(多态)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#adaptive-design-patterns" onclick="onNavClick(`#adaptive-design-patterns-nav`)" id="adaptive-design-patterns-nav">
									Adaptive design patterns
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#the-null-object-pattern" onclick="onNavClick(`#the-null-object-pattern-nav`)" id="the-null-object-pattern-nav">
									The Null Object pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-isnull-property-anti-pattern" onclick="onNavClick(`#the-isnull-property-anti-pattern-nav`)" id="the-isnull-property-anti-pattern-nav">
									The IsNull property anti-pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-adapter-pattern" onclick="onNavClick(`#the-adapter-pattern-nav`)" id="the-adapter-pattern-nav">
									The Adapter pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-strategy-pattern" onclick="onNavClick(`#the-strategy-pattern-nav`)" id="the-strategy-pattern-nav">
									The Strategy pattern
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#further-versatility" onclick="onNavClick(`#further-versatility-nav`)" id="further-versatility-nav">
									Further versatility
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#testinghttpsdocsmicrosoftcomen-usvisualstudiotestviewvs-2019" onclick="onNavClick(`#testinghttpsdocsmicrosoftcomen-usvisualstudiotestviewvs-2019-nav`)" id="testinghttpsdocsmicrosoftcomen-usvisualstudiotestviewvs-2019-nav">
									Testing
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#unit-testing" onclick="onNavClick(`#unit-testing-nav`)" id="unit-testing-nav">
									Unit Testing
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#test-driven-development" onclick="onNavClick(`#test-driven-development-nav`)" id="test-driven-development-nav">
									Test-driven development
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-double" onclick="onNavClick(`#test-double-nav`)" id="test-double-nav">
									Test double
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#manual-test-fakery" onclick="onNavClick(`#manual-test-fakery-nav`)" id="manual-test-fakery-nav">
									Manual test fakery
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#mocking-frameworks" onclick="onNavClick(`#mocking-frameworks-nav`)" id="mocking-frameworks-nav">
									Mocking frameworks
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#testing-all-control-flows" onclick="onNavClick(`#testing-all-control-flows-nav`)" id="testing-all-control-flows-nav">
									Testing all control flows
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-setup" onclick="onNavClick(`#test-setup-nav`)" id="test-setup-nav">
									Test setup
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#writing-tests-first" onclick="onNavClick(`#writing-tests-first-nav`)" id="writing-tests-first-nav">
									Writing tests first
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#what-is-tdd" onclick="onNavClick(`#what-is-tdd-nav`)" id="what-is-tdd-nav">
									What is TDD?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-driven-design" onclick="onNavClick(`#test-driven-design-nav`)" id="test-driven-design-nav">
									Test-driven design
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#test-first-development" onclick="onNavClick(`#test-first-development-nav`)" id="test-first-development-nav">
									Test-first development
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#further-testing" onclick="onNavClick(`#further-testing-nav`)" id="further-testing-nav">
									Further testing
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#the-testing-pyramid" onclick="onNavClick(`#the-testing-pyramid-nav`)" id="the-testing-pyramid-nav">
									The testing pyramid
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#the-testing-quadrant" onclick="onNavClick(`#the-testing-quadrant-nav`)" id="the-testing-quadrant-nav">
									The testing quadrant
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#testing-for-prevention-and-cure" onclick="onNavClick(`#testing-for-prevention-and-cure-nav`)" id="testing-for-prevention-and-cure-nav">
									Testing for prevention and cure
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#how-do-you-decrease-mttr" onclick="onNavClick(`#how-do-you-decrease-mttr-nav`)" id="how-do-you-decrease-mttr-nav">
									How do you decrease MTTR?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#reference" onclick="onNavClick(`#reference-nav`)" id="reference-nav">
									Reference
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#refactoring" onclick="onNavClick(`#refactoring-nav`)" id="refactoring-nav">
									Refactoring
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#changing-existing-code" onclick="onNavClick(`#changing-existing-code-nav`)" id="changing-existing-code-nav">
									Changing existing code
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#replacing-magic-numbers-with-constants" onclick="onNavClick(`#replacing-magic-numbers-with-constants-nav`)" id="replacing-magic-numbers-with-constants-nav">
									Replacing “magic numbers” with constants
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#replacing-a-conditional-expression-with-polymorphism" onclick="onNavClick(`#replacing-a-conditional-expression-with-polymorphism-nav`)" id="replacing-a-conditional-expression-with-polymorphism-nav">
									Replacing a conditional expression with polymorphism
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#replacing-a-constructor-with-a-factory-method" onclick="onNavClick(`#replacing-a-constructor-with-a-factory-method-nav`)" id="replacing-a-constructor-with-a-factory-method-nav">
									Replacing a constructor with a factory method
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#replacing-inheritance-with-delegation" onclick="onNavClick(`#replacing-inheritance-with-delegation-nav`)" id="replacing-inheritance-with-delegation-nav">
									Replacing inheritance with delegation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#code-smell-refused-bequest" onclick="onNavClick(`#code-smell-refused-bequest-nav`)" id="code-smell-refused-bequest-nav">
									Code smell: Refused bequest
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#aggressive-refactoring" onclick="onNavClick(`#aggressive-refactoring-nav`)" id="aggressive-refactoring-nav">
									Aggressive refactoring
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#red-green-refactorredesign" onclick="onNavClick(`#red-green-refactorredesign-nav`)" id="red-green-refactorredesign-nav">
									Red, green, refactor…redesign
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#dependency-inversionhttpswwwopenhearticucsdependency-injection" onclick="onNavClick(`#dependency-inversionhttpswwwopenhearticucsdependency-injection-nav`)" id="dependency-inversionhttpswwwopenhearticucsdependency-injection-nav">
									Dependency inversion
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://www.openheart.icu/">
            42th openheart
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://www.openheart.icu/">
        <div class="single-column-header-title">42th openheart</div>
        
        <div class="single-column-header-subtitle">Kris Nie&#39;s Blog.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    Adaptive Code
                    
                    <div class="post-subtitle">
                        自适应代码
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-11-21 22:30
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/technical">Technical</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/cs">CS</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            28 min
                            
                            55 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="adaptive-code-agile-coding-with-design-patterns-and-solid-principleshttpsgithubcomadaptivecode"><a href="https://github.com/AdaptiveCode">Adaptive Code: Agile coding with design patterns and SOLID principles</a></h1>
<p>从标题中就不难发现，Adaptive Code的重点有三个：</p>
<ul>
<li>
<p>敏捷编码</p>
</li>
<li>
<p>设计模式</p>
</li>
<li>
<p>SOLID(单一功能、开闭原则、里氏替换、接口隔离以及依赖反转)原则</p>
</li>
</ul>
<h2 id="scrum">Scrum</h2>
<p><a href="https://www.scrum.org/resources/what-is-scrum">scrum.org</a>  2020-Scrum-Guide-US</p>
<blockquote>
<p>Scrum is:</p>
<ul>
<li>Lightweight</li>
<li>Simple to understand</li>
<li>Difficult to master</li>
</ul>
</blockquote>
<h3 id="what">What</h3>
<blockquote>
<p>All work is prioritized on the product backlog and, at the start of each sprint, the development team commits to the work that they will complete during the new iteration by placing it on the sprint backlog. The unit of work within Scrum is the <strong>story</strong>. The product backlog is a prioritized queue of pending stories, and each sprint is defined by the stories that will be developed during an iteration.</p>
</blockquote>
<p>之前公司也是采用的这种开发框架，将一个项目分为多个迭代（sprint），但是此处引出了一个之前没听过的story。Story在后续Hierarchy of composition中也提到并详细介绍，此处的story可以就相当于是产品积压项，Story下可以有确定的Task（一个Story需要多个人完成，每个人都有自己的任务）。</p>
<h4 id="agile-software-development-敏捷软件开发与scrum">Agile software development (敏捷软件开发)与Scrum</h4>
<p>Scrum is one of the most common implementations of an Agile process.</p>
<h4 id="roles-and-responsibilities">Roles and responsibilities</h4>
<p><strong>Product owner</strong>(PO, provides the link between the client or customer and the rest of the development team, <strong>what is to be done</strong>)</p>
<p><strong>Scrum master</strong>(SM, shields the team from any external distractions during the sprint and tackles any of the impediments that the team flags during the daily Scrum meeting, <strong>how it is to be done</strong>)</p>
<p><strong>Development team</strong>(generalizing specialists)</p>
<h4 id="the-scrum-board">The Scrum board</h4>
<p>Physical Scrum boards/Digital Scrum boards.</p>
<h4 id="sprint-burndown-chart">Sprint burndown chart</h4>
<p>closely to the path of perfection.</p>
<h4 id="product-backlog">Product backlog</h4>
<p>产品积压项，对应产品的新feature。</p>
<h4 id="sprint-planning">Sprint planning</h4>
<p><strong>Avoiding Parkinson’s Law</strong></p>
<blockquote>
<p>Parkinson’s Law states: “Work expands so as to fill the time available for its completion.” —Cyril Northcote Parkinson</p>
</blockquote>
<p><a href="https://wiki.mbalib.com/wiki/%E5%B8%95%E9%87%91%E6%A3%AE%E5%AE%9A%E5%BE%8B">帕金森定律</a>是指企业在发展过程中往往会因业务的扩展或其他原因而出现的一种现象，这一效应使得企业的机构迅速膨胀资源浪费员工积极性下降。</p>
<p>The focus should remain on completing the story—that is, on meeting the definition of done—as quickly as possible.</p>
<p>Affinity estimation <strong>合理</strong>的工时分配（取决于对项目业务、研发人员的能力的了解程度，以及对其他突发情况的风险应对计划）</p>
<p>从大到小排序所有的stories，然后从小到大开始。</p>
<h4 id="stand-up-meeting">Stand-up meeting</h4>
<p>死亡询问What did you do yesterday? What will you do today? What impediments do you face?</p>
<h3 id="why">Why</h3>
<h4 id="cynefin-framework">Cynefin framework</h4>
<blockquote>
<p>Lean, or Agile, approaches to software acknowledge that the problem of software delivery is at least complicated and can even be complex.</p>
</blockquote>
<p>敏捷开发或精益求精的软件，才能保证在Cynefin的第一或第二象限，避免进入Chaos或者all is not quite as it seems(一切都不尽如人意)的Obvious。我的理解是，Chaos就是毫无头绪；而Obvious就是传统的瀑布式开发，难以<strong>适应复杂的需求或者频繁的需求变更</strong>。</p>
<h4 id="scrum-versus-waterfall">Scrum versus waterfall</h4>
<p><strong>waterfall</strong>：</p>
<ul>
<li>the output from one stage becomes the input to the next</li>
<li>each phase is completed before moving to the next phase</li>
<li>no errors, issues, problems, or m standings are discovered after a phase has completed</li>
<li>document-centric, generating a lot of documentation that does not directly improve the software product</li>
</ul>
<p><strong>Agile processes：</strong></p>
<ul>
<li>welcomes change and allows everyone to adapt to the changes that will occur</li>
<li>This is not to say that documentation is unimportant or that Agile processes never produce documentation(living documents, such as wikis)</li>
</ul>
<h4 id="shortcoming">Shortcoming</h4>
<h3 id="how">How</h3>
<p>本章开始就提出如下问题：</p>
<blockquote>
<p><em>Given that Agile frameworks are now prevalent, how can you ensure that the code you write enables and complements your development framework?</em></p>
</blockquote>
<p>这肯定也是我们所关注的重中之重。</p>
<p>敏捷开发流程之外还需要注意的问题：</p>
<ul>
<li>Rigidity</li>
<li>Lack of abstractions</li>
<li>Too many abstractions</li>
<li>Mixed responsibilities</li>
<li>Untestability</li>
<li>Skyhooks vs. cranes(All skyhooks should be replaced with appropriate cranes.)
<ul>
<li>Skyhooks:
<ul>
<li>Static methods</li>
<li>Static classes (including singletons)</li>
<li>Object construction that uses new</li>
<li>Extension methods</li>
</ul>
</li>
<li>Cranes:
<ul>
<li>Interfaces</li>
<li>Dependency injection</li>
<li>Inversion of control</li>
<li>Factories</li>
</ul>
</li>
</ul>
</li>
<li>Metrics</li>
<li>Unit test coverage</li>
<li>Cyclomatic complexity</li>
</ul>
<h2 id="kanban">Kanban</h2>
<p>Kanban is a very <strong>simple</strong> process <strong>with minimal rules</strong> and a <strong>handful</strong> of general guidelines.</p>
<p>看板是一个非常简单的过程，具有最少的规则和一些通用准则。</p>
<p>看板常被用来指代流程本身。简单的看板可以包含only a high-level process(SIPOC模型？，Supplier Input Process Output Customer)：To Do, Doing, and Done(the states map, 类似个人的timesheet，正因为看板的简单通用小到个人大到集体都可以使用)。当然也可以定义许多的规则严格把控整个软件的流程（Analyze/Implement/Verify/Deliver）</p>
<p>The popular online work-tracking software : <a href="https://trello.com/">Trello</a></p>
<h3 id="limiting-work-in-progress">Limiting work in progress</h3>
<p>用来避免流程中受到需求变更的影响  right-sizing work(Imaportant)</p>
<h3 id="event-driven-ceremoniesmeeting">Event-driven ceremonies(meeting)</h3>
<p>避免频繁甚至意义不大的会议打断研发的思路</p>
<p><strong>You would never have been precisely accurate.</strong></p>
<h3 id="classes-of-servicepriority">Classes of service(priority)</h3>
<p>当工作具有不同的风险特征时，使用Classes of service使团队能够确定紧急性或重要性很高的工作，并在必要时将精力集中在那里。</p>
<ul>
<li>
<p>service level agreements (SLAs) 服务级别协议</p>
<ul>
<li>第95个百分位(95th percentile) 指的是所给数集中超过其95%的数，95th百分点是统计时所采用的最高值，超过的5%的数据将被舍弃。百分位数的意义就在于，我们可以了解到某一个样本在整个样本集合中所处的位置或者某一个样本组的值大概是怎么样分布的。计算百分位数的方法：
<ul>
<li>最近序数方法（The Nearest Rank method）n = ((p / 100) * N) eg.p=95 N=20 n=19 则20个序列中第19个为95th percentile</li>
<li>在最近序数间线性插值的方法（The Linear Interpolation Between Closest Ranks method）</li>
<li>权重百分位数方法（The Weighted Percentile method）</li>
<li>微软excel表格算法（Microsoft Excel method）</li>
<li>NIST方法（NIST method）</li>
</ul>
</li>
</ul>
</li>
<li>
<p>class WIP limits. 限制使用的典型例子就是重构，并根据工作量大小调整。如果重构的工作量大，则设定高限制（宽松eg.整个限制的75%）；相反则低限制（紧张eg.整个限制的25%）。</p>
</li>
<li>
<p>People as a class of service 开发人员也可以进行灵活的分配，比如通过看板的SLA和95th percentile得知项目中的前端工作确实很高时，可以重新分配足够的前端研发到项目中加速任务的完成。</p>
</li>
</ul>
<h3 id="analysis">Analysis</h3>
<h4 id="lead-time--cycle-time">Lead time &amp; Cycle time</h4>
<ul>
<li>
<p>Cycle time = Time spent in progress</p>
</li>
<li>
<p>Lead time = Time spent waiting in backlog + cycle time</p>
</li>
</ul>
<p>Lead time measures the time elapsed between order and delivery, thus it measures your production process from your customer’s perspective. Cycle time starts when the actual work begins on the unit and ends when it is ready for delivery.</p>
<p>In other words, cycle time measures the completion rate and lead time measures the arrival rate.</p>
<h4 id="cumulative-flow-diagrams">Cumulative flow diagrams</h4>
<p>By graphing the data as a stacked area chart with the number of <strong>work items on the y-axis</strong> and the <strong>day number on the x-axis</strong>……</p>
<p>如何从累积流程图中获取测量整个流程的数据</p>
<ul>
<li>
<p>Lead time Measuring the x-axis distance between the To Do and Done areas gives the lead time of work items.</p>
</li>
<li>
<p>Cycle time Measuring the x-axis distance between the Doing and Done areas gives the cycle time of work items.</p>
</li>
<li>
<p>Work in progress Measuring the y-axis distance between the Doing and Done areas gives <strong>the total number of work items that are currently in progress</strong>.</p>
</li>
</ul>
<p>Unhealthy flows</p>
<ul>
<li>Too much work in progress: a lack of WIP limits</li>
<li>Scope creep: 将过量的任务放到TODO，没有考虑是否具有完成这些任务的能力，从而导致lead times(生产周期)变长</li>
<li>Long phase of delivery: most commonly the Implement phase, when coding occurs. Apply smaller WIP limits to the bottleneck</li>
<li>Delivery plateau: 交付平稳期</li>
<li>Regulated deployment phase: 团队限制，比如只有周五才可以发布……</li>
</ul>
<p>Scrum管理变更的方法是对Sprint设置时间并锁定输入，以便在Sprint开始后到达的新工作必须等到下一次迭代后才能确定优先级和计划时间。看板允许随时添加新工作，但仅提供有关完成新工作可能需要多长时间的服务级别协议（SLA）。WIP Limts看板限制进行中的工作，以确保优先于完成工作而不是开始新的工作。</p>
<p>Scrum is Agile for new teams, while Kanban is Agile for mature teams. 如果工作只是项目的一部分，并且时间和金钱资源有限，那么Scrum是最好的选择，因为每个冲刺都可以单独进行成本估算。如果工作是连续的，没有确定的结束日期，则看板更适合。</p>
<h2 id="dependencies-and-layering">Dependencies and layering</h2>
<ol>
<li>
<p>Framework dependencies</p>
</li>
<li>
<p>Third-party dependencies</p>
<p>The main reason to use a third-party dependency is to exchange the effort required for implementing some features or infrastructure for the effort of integrating something that is already written and suitable for the job.</p>
</li>
</ol>
<p>.net core 可以使用NuGet依赖管理工具</p>
<p>directed graph(acyclic digraphs/cyclic digraph) 用有向图对依赖结构建模 A-&gt;B 为A依赖B；此方式只能展示出依赖关系，并不能展示出依赖关系的具体分类（集成、聚合、复合、关联）。</p>
<h3 id="managing-dependencies">Managing dependencies</h3>
<p>patterns: 经验总结后可以重用的模式</p>
<p>anti-patterns: 实际开发中发先存在许多不仅没多少优点，甚至会引入很多问题的模式</p>
<p>Code smells: 如果某段代码可能存在问题(some code is potentially problematic)，就可以说有代码味道</p>
<h4 id="resolving-dependencies建议朗读并背诵">Resolving dependencies(建议朗读并背诵)</h4>
<h5 id="assemblies">Assemblies</h5>
<p>The Common Language Runtime (CLR), which is the virtual machine that the .NET Framework uses to execute code instructions, is a software product like any other and has been programmed to behave in a predictable and logical way when hosting applications.</p>
<p><strong>Resolution process</strong> The assembly resolution process is an important facet of the CLR. This covers the gap between adding a reference to an assembly or project and having the application running with this assembly loaded. The process is as follows:</p>
<p><img src="https://raw.githubusercontent.com/KrisNie/ImageHosting/main/Blog/AssemblyResolutionProcess-20201226102807.jpg" alt="Assembly resolution process"></p>
<ul>
<li>
<p>The CLR uses a just-in-time (JIT) model to resolve assemblies. As was already proven earlier in the chapter, the references contained in an application are not resolved as you start up the application, but rather when you first make use of a feature of that assembly—literally just in time.</p>
</li>
<li>
<p>Each assembly has an identity that is a composite of its name, version, culture, and public key token. Features such as binding redirects can change this identity, so determining it is not quite as simple as it might seem.</p>
</li>
<li>
<p>When the assembly’s identity has been established, the CLR is able to determine whether it has already attempted to resolve this dependency previously during the current execution of the application.</p>
</li>
<li>
<p>Asking this question causes the CLR to branch depending on the answer. If you have attempted to resolve this assembly, that process has either already succeeded or failed. If it succeeded, the CLR can use the assembly that has already been loaded, and it exits early. If not, the CLR knows that it need not continue attempting to resolve this assembly because it will fail.</p>
</li>
<li>
<p>Alternatively, if this is the first attempt to resolve the assembly, the CLR first checks the global assembly cache (GAC). The GAC is a machine-wide assembly repository that allows multiple versions of the same assembly to be executed in the same application. If the assembly is found in the GAC, the resolution process is successful and the discovered assembly is loaded. So you now know that, because the GAC is searched first, the presence of an applicable assembly in the GAC will take precedence over an assembly on the file system.</p>
</li>
<li>
<p>If the assembly could not be found in the GAC, the CLR starts probing a variety of directories in search of it. The directories searched depend on the app.config settings. If there is a codeBase element in the app.config, that location is checked and—if the assembly is not foundno other locations are subsequently checked. However, the default is for the application’s root directory to be searched, which is typically the /bin folder that relates to the entry point or web application. If the assembly cannot be found there, the resolution process fails and an exception is thrown by the CLR. Typically, this results in the termination of the application.</p>
</li>
</ul>
<p><strong><a href="https://docs.microsoft.com/en-us/dotnet/framework/tools/fuslogvw-exe-assembly-binding-log-viewer">The Fusion log(程序集绑定日志)</a></strong>  用来打印CLR加载程序集失败的问题，开启以后，任何托管应用程序的所有尝试（无论成功与否）都会被记录到日志中。</p>
<p>Not all dependencies require assembly references. One alternative is to deploy the service code as a hosted service. This requires inter-process or inter-network communication, but it minimizes the assembly references required between client and server.</p>
<h4 id="services待深入了解">Services(待深入了解)</h4>
<p><strong>已知端点(编译时就知道服务的位置，直接为客户端创建一个服务代理)</strong></p>
<p>创建Proxy的两种方式：</p>
<ul>
<li>使用Visual Studio为项目添加一个服务引用</li>
<li>使用.NET Framework的<a href="https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.channelfactory-1?view=dotnet-plat-ext-5.0">Channel Factory</a>类编码创建服务代理</li>
</ul>
<p><strong>服务发现(只知道服务的绑定类型或协定，但并不清楚服务的宿主地址)</strong></p>
<ul>
<li>Managed mode 托管模式
<ul>
<li>客户端请求中心服务</li>
<li>single point of failure (SPOF)</li>
</ul>
</li>
<li>Ad-Hoc mode 临时模式
<ul>
<li>采用组播网路消息(multicast network messages)</li>
<li>使用UDP协议，每个可发现的服务都会在一个特定的IP地址和端口上等待查询请求(The default implementation of this uses the User Datagram Protocol (UDP), with each discoverable service listening on a specified IP address 1 for queries)， 不可用的服务是不会被发现的</li>
</ul>
</li>
</ul>
<p><a href="https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/wcf-discovery">WCF(Windows Communication Foundation) Discovery</a></p>
<ul>
<li>For an alternative to <em>WCF</em>, consider gRPC. - - DOTNET 5</li>
</ul>
<p><strong>REST(REpresentational State Transfer))ful services</strong></p>
<p><a href="https://docs.microsoft.com/en-us/archive/msdn-magazine/2009/january/service-station-an-introduction-to-restful-services-with-wcf">An Introduction To RESTful Services With WCF</a></p>
<p>.net core web api 和 grpc 都属于RESTful的服务，更适合跨平台</p>
<h3 id="layering">Layering</h3>
<p>逻辑层与物理层(Layers vs. tiers)</p>
<p>两层：用户界面-访问数据</p>
<p>三层：用户界面-业务逻辑-数据访问(MVC属于用户界面层)</p>
<h4 id="cross-cutting-concerns切面">Cross-cutting concerns(切面)</h4>
<p>Sometimes a component’s responsibilities are not easily limited to a single layer. Functions such as auditing, security, and caching can permeate through the entire application, because they are applicable at every layer.</p>
<p>Aspect-oriented programming (AOP)</p>
<p>比如使用扩展属性更加明显优雅简介的完成可以大量重用操作。</p>
<h4 id="asymmetric-layering非对称分层">Asymmetric layering(非对称分层)</h4>
<p>Command/Query Separation(CQS): Bertrand Meyer, in his book Object-Oriented Software Construction (Prentice Hall, 1997), used the phrase command/query separation (CQS) to explain that all object methods should be one of only two things: a command or a query.</p>
<p>Command/Query Responsibility Segregation(CQRS): Commands and queries follow much the same rules as with CQS, but CQRS goes one step further: it acknowledges that commands and queries might need to follow different paths through the layering in order to be best handled.</p>
<p><img src="https://raw.githubusercontent.com/KrisNie/ImageHosting/main/Blog/CQRS-20201227140634.jpg" alt="Domain models should only be used for handling commands."></p>
<p>Sound management of dependencies很重要</p>
<h2 id="interfaces-and-design-patterns">Interfaces and design patterns</h2>
<h3 id="diamond-inheritance-problem">Diamond inheritance problem</h3>
<p><img src="https://raw.githubusercontent.com/KrisNie/ImageHosting/main/Blog/Diamond-20201227143025.png" alt="Diamond inheritance"></p>
<p>Because of this ambiguity, the .NET Framework does not allow multiple inheritance of classes.</p>
<h3 id="explicit-implementation">Explicit implementation</h3>
<h3 id="polymorphism多态">Polymorphism(多态)</h3>
<p>The ability to use an object of one type and have it implicitly act as if it were of a different type is called polymorphism.</p>
<p><img src="https://raw.githubusercontent.com/KrisNie/ImageHosting/main/Blog/Polymorphism-20201227144730.png" alt="ploymorphism"></p>
<h3 id="adaptive-design-patterns">Adaptive design patterns</h3>
<h4 id="the-null-object-pattern">The Null Object pattern</h4>
<h4 id="the-isnull-property-anti-pattern">The IsNull property anti-pattern</h4>
<h4 id="the-adapter-pattern">The Adapter pattern</h4>
<ul>
<li>The Class Adapter pattern</li>
<li>The Object Adapter pattern</li>
</ul>
<h4 id="the-strategy-pattern">The Strategy pattern</h4>
<h4 id="further-versatility">Further versatility</h4>
<ul>
<li>Duck-typing</li>
<li>Mixins</li>
<li>Fluent interfaces</li>
</ul>
<h2 id="testinghttpsdocsmicrosoftcomen-usvisualstudiotestviewvs-2019"><a href="https://docs.microsoft.com/en-us/visualstudio/test/?view=vs-2019">Testing</a></h2>
<h3 id="unit-testing">Unit Testing</h3>
<p>Unit test: Testing a single unit of code, very small atomic test.</p>
<p>Integration test: Testing multiple units of code integrated together, to go through the different layers and ensure they are using eachother correctly. These should be done after unit tests have verified the individual units work independently. Many people mistakenly refer to these as unit tests.</p>
<p>Built Verification Test: Testing the built product by deploying it and running tests that will interact with it in the manner a user would. Also mistakenly referred to as unit tests frequently. These are the largest most full featured tests and often just done manually by testing teams rather than being automated.</p>
<p>Unit testing is the discipline of writing code that tests other code. Every unit test is composed of three distinct parts(AAA):</p>
<ul>
<li>
<p>The <strong>arrange</strong>ment of the preconditions of the test 准备</p>
</li>
<li>
<p>The performance of the <strong>act</strong> that is being tested 操作</p>
</li>
<li>
<p>The <strong>assert</strong>ion that the expected behavior occurred 断言</p>
</li>
</ul>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c#" data-lang="c#"><span style="color:#658b00">[TestClass]</span> 
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">AccountTest</span> 
{
<span style="color:#658b00">    [TestMethod]</span> 
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">void</span> AddingTransactionChangesBalance() {
        <span style="color:#228b22">// Arrange
</span><span style="color:#228b22"></span>        <span style="color:#00688b;font-weight:bold">var</span> account = <span style="color:#8b008b;font-weight:bold">new</span> Account();
        <span style="color:#228b22">// Act 
</span><span style="color:#228b22"></span>      	account.AddTransaction(<span style="color:#b452cd">200</span>m);
        <span style="color:#228b22">// Assert 
</span><span style="color:#228b22"></span>      	Assert.AreEqual(<span style="color:#b452cd">200</span>m, account.Balance);
    }
}
</code></pre></div><p><a href="https://docs.microsoft.com/en-us/visualstudio/test/run-unit-tests-with-test-explorer?view=vs-2019">Running the tests</a></p>
<p>MSTest is a convenient choice for unit tests—hence its use for the examples in this chapter—but it is not a great choice. NUnit and XUnit are better alternative testing frameworks that rely on external dependencies.</p>
<h4 id="test-driven-development">Test-driven development</h4>
<p>When you use a TDD approach to writing software, you write the unit tests and the production code in tandem, with a failing test written for every expected behavior exhibited by every method of every class in the production code. The failing test fails only because the production code does not exist yet. The test states—via assertions—that the production code should act in some way, but because it does not yet, the test fails. After the production code is implemented in the simplest way possible to satisfy the test’s requirements, the test will succeed.</p>
<p>Red, green, refactor:</p>
<ol>
<li>
<p>Write a failing test that targets the expected behavior of the SUT.</p>
</li>
<li>
<p>Implement just enough of the SUT so that the new test passes without breaking existing successful tests.</p>
</li>
<li>
<p>If any refactoring can be done on the SUT to improve its design or overall quality, now is the time to do so.</p>
</li>
</ol>
<p>After the transition from red to green for each unit test, you had the opportunity to refactor the implementation of the SUT.</p>
<p>Addition: <a href="https://martinfowler.com/articles/is-tdd-dead/">Is TDD Dead?</a></p>
<h4 id="test-double">Test double</h4>
<p>测试替身</p>
<p><strong>Dummies</strong> This is the simplest of all test doubles. Dummies are intended to fulfil parameter lists and have no special behavior. Often, real implementations are used as dummies and might be primitive types, which are nevertheless required to turn a unit test green.</p>
<p>被测试方法需要一些参数，但是这些参数实际上并没有用到，它们的存在只是为了满足调用方法的参数要求</p>
<p><strong>Spies</strong> A spy records the calls that have been made to its methods, along with the parameters that were supplied to each call. The record of these calls can then be used in assertions to ensure that certain calls were made.</p>
<p>确认方法调用记录如何调用，并在断言中可以使用调用结果，断言程序运行的正确性</p>
<p><strong>Stubs</strong> A stub is a dependency that is required by the system under test and that will return a pre-supplied answer whenever queried. Stubs are most useful at the seams of an application, where external dependencies are required. Instead of depending on a database, you can depend on a stub that can return dummy data.</p>
<p>在测试中为每个调用提供一个封装好的响应，它可以使用很直接的方式模拟依赖项的行为。例如我们可以使用Stub把相关数据放到内存里查询而不是查询真实的数据库。</p>
<p><strong>Fakes</strong> A fake is very similar to a stub, but the intent is subtly different. Fakes are not supplied with any preconceived responses to queries, but are instead closer to real implementations with some necessary concession to avoid an external dependency. Personally, I make a distinction between a manually implemented mock and a mock that is supplied by a mocking framework: manual mocks are called fakes.</p>
<p>Fake 可以是某个 Data Access Object 或者 Repository 的基于内存的实现；该实现并不会真的去进行数据库操作。这就允许了我们能够在并没有真的启动数据库或者执行耗时的外部请求的情况下进行服务的测试。</p>
<p><strong>Mocks</strong> Whereas stubs and fakes provide test doubles for dependencies that are indirect queries, mocks are test doubles for dependencies that have indirect commands. Mocks are useful to determine whether a command was executed on a dependency of the system under test.</p>
<p>模拟一个具有特性行为的对象，在测试开始前根据期望提供需要的结果。被测试对象往往调用这个对象的方法时，根据条件得到不同的输入，从而满足测试对象的不同场景。例如，mock 数据库的存储层，返回正常数据、空或者丢出异常等情况。当我们并不希望真的调用生产环境下的代码或者在测试中难于验证真实代码执行效果的时候，我们会用 Mock 来替代那些真实的对象。典型的例子即是对邮件发送服务的测试，我们并不希望每次进行测试的时候都发送一封邮件，毕竟我们很难去验证邮件是否真的被发出了或者被接收了。我们更多地关注于邮件服务是否按照我们的预期在合适的业务流中被调用。</p>
<h4 id="manual-test-fakery">Manual test fakery</h4>
<h4 id="mocking-frameworks">Mocking frameworks</h4>
<p>The most popular: <a href="https://github.com/Moq/moq4/wiki/Quickstart">MOQ</a></p>
<p>在一个项目里, 我们经常需要把某一部分程序独立出来以便我们可以对这部分进行测试. 这就要求我们不要考虑项目其余部分的复杂性, 我们只想关注需要被测试的那部分. 这里就需要用到模拟(Mock)技术.</p>
<p>Mocking is the act of taking a small piece of code that may depend on other things, mocking those other things up so that you can control the circumstances surrounding the piece of code you want to test.</p>
<p>The purpose of mocking is atomicity in tests. It allows you to test just the individual piece of code you want, without having it&rsquo;s tests affected due to bugs in dependent code pieces. Also mocking gives you the ability to fabricate a variety of scenarios to test the edge cases of each piece of code.</p>
<p>Mocking is generally purposed for creating boundaries around the target code in unit tests, though it&rsquo;s not uncommon to use it in integration tests too for fabricating a resource that acts as the seed to the integrated code chain you&rsquo;re targeting.</p>
<p>Moq lets you set the following expectations on a method call:</p>
<ul>
<li>
<p>Call some other lambda expression.</p>
</li>
<li>
<p>Return a specific value.</p>
</li>
<li>
<p>Throw a specified type of exception.</p>
</li>
<li>
<p>Verify that this method was called.</p>
</li>
</ul>
<p>Mocks and test over-specification: An over-specified test is fragile, but you can avoid this fragility by changing what you assert. In other words, a test is over-specified when it has knowledge of the SUT’s <em>implementation</em> rather than its <em>expected behavior</em>.</p>
<h4 id="testing-all-control-flows">Testing all control flows</h4>
<p><em>Happy Path</em>: the execution path through the code that yields no errors and causes no problems.</p>
<p>There are a few gaps that need to be addressed:</p>
<ul>
<li>What if the account repository is a null reference?</li>
<li>What if the repository cannot find the account?</li>
<li>What if the account method throws an exception?</li>
</ul>
<p>To avoid leaking dependencies between layers, it is good practice to wrap an exception thrown at a lower layer in a new exception for this layer. The exceptions that the domain model throws will be specific to that layer. If the service layer allows this to propagate up to the controller, the controller will need knowledge of the DomainException type to catch and handle these exceptions. This introduces a dependency between the controller and the domain model layer, which should be avoided. Instead, the service will catch the domain model exceptions and wrap them in ServiceException instances before throwing them up to the controller. Due to the controller’s dependency on the service layer, it is able to catch the exceptions that it defines. It is important to acknowledge that the ServiceException contains the DomainException as an inner exception—without this, valuable context about the original exception is lost: the entry point of the application might be able to unwrap this exception in a global exception handler, for example.</p>
<h4 id="test-setup">Test setup</h4>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c#" data-lang="c#"><span style="color:#658b00">[TestInitialize]</span>
</code></pre></div><h3 id="writing-tests-first">Writing tests first</h3>
<h4 id="what-is-tdd">What is TDD?</h4>
<p>The “<strong>purist</strong>” idea of TDD is that it is a design tool—that developers should approach the keyboard without forethought of the production code they might implement.</p>
<p>The “<strong>pragmatic</strong>” idea of TDD is that developers write the unit tests first.</p>
<h4 id="test-driven-design">Test-driven design</h4>
<ol>
<li>Write exactly one new test. It should be the smallest test which seems to point in the direction of a solution.</li>
<li>Run the test to make sure it fails.</li>
<li>Make the test from (1) pass by writing the least amount of implementation code you can IN THE TEST METHOD.</li>
<li>Refactor to remove duplication or otherwise as required to improve the design. Be strict about the refactorings. Only introduce new abstractions (methods, classes, etc) when they will help to improve the design of the code. Specifically:
<ol>
<li>ONLY Extract a new method if there is sufficient code duplication in the test methods.</li>
<li>When extracting a method, initially extract it to the test class (don’t create a new class yet). ONLY create a new class when a clear grouping of methods emerges and when the test class starts to feel crowded or too large.</li>
</ol>
</li>
<li>Repeat the process by writing another test (go back to step 1).</li>
</ol>
<h4 id="test-first-development">Test-first development</h4>
<p>TDD = TFD + Refactoring</p>
<p>TDD是测试驱动，TFD是测试优先，测试优先出现红色就需要重构，这样就靠向了TDD。</p>
<h3 id="further-testing">Further testing</h3>
<h4 id="the-testing-pyramid">The testing pyramid</h4>
<p>The testing pyramid reminds you of the relative number of tests that you should aim to maintain.</p>
<h4 id="the-testing-quadrant">The testing quadrant</h4>
<p><img src="https://lisacrispin.com/wp-content/uploads/2011/11/Agile-Testing-Quadrants.png" alt="img"></p>
<p>The testing quadrant diagram explains that tests can be useful to different stakeholders and for different reasons.</p>
<h3 id="testing-for-prevention-and-cure">Testing for prevention and cure</h3>
<h4 id="how-do-you-decrease-mttr">How do you decrease MTTR?</h4>
<ul>
<li>logging</li>
<li>alerting</li>
<li>monitoring</li>
</ul>
<h2 id="reference">Reference</h2>
<ol>
<li><a href="https://lisacrispin.com/2011/11/08/using-the-agile-testing-quadrants/">Using the Agile Testing Quadrants</a></li>
<li><a href="https://www.elastic.co/what-is/elk-stack">ELK Stack</a></li>
</ol>
<h2 id="refactoring">Refactoring</h2>
<p>Refactoring is the process of incrementally improving the design of existing code.</p>
<p>This is an important point—refactoring changes the <em>arrangement</em> of the code, not the <em>outcome</em>.</p>
<h3 id="changing-existing-code">Changing existing code</h3>
<h4 id="replacing-magic-numbers-with-constants">Replacing “magic numbers” with constants</h4>
<p>To the person who wrote the code, their significance might be obvious because that person has prior knowledge of what it all means. In reality, that will probably only be true for a week, perhaps two, before the person’s memory starts to fade and they lose track of what that 5, or that 2, means.</p>
<h4 id="replacing-a-conditional-expression-with-polymorphism">Replacing a conditional expression with polymorphism</h4>
<p>子类继承父类以替换Switch</p>
<h4 id="replacing-a-constructor-with-a-factory-method">Replacing a constructor with a factory method</h4>
<h4 id="replacing-inheritance-with-delegation">Replacing inheritance with delegation</h4>
<h4 id="code-smell-refused-bequest">Code smell: Refused bequest</h4>
<p>如果存在一个子类与其他子类不一致，比如不需要实现一个基类中的方法，此时可以有两种方法</p>
<h3 id="aggressive-refactoring">Aggressive refactoring</h3>
<p>Code is never done. Code can be working, good enough, sufficient, valuable, and producing revenue. But it is rarely, if ever, complete.</p>
<h4 id="red-green-refactorredesign">Red, green, refactor…redesign</h4>
<h2 id="dependency-inversionhttpswwwopenhearticucsdependency-injection"><a href="https://www.openheart.icu/cs/dependency-injection/">Dependency inversion</a></h2>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">Last modified on 2020-12-27</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://www.openheart.icu/speech/i-am-a-freshman/">
			Next<br>I am a freshman
                </a>
                
                
                
                <a class="older-posts" href="https://www.openheart.icu/cs/domain-driven-design/">
			Previous<br>Domain-driven design
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>









            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
	
	<i class="fa fa-weixin" aria-hidden="true"></i>
	QuadragintaDuo
	<br>
	<i class="fa fa-envelope" aria-hidden="true"></i>
	krisnie42@qq.com
	<br>
		site pv:<span id="busuanzi_value_site_pv_m"></span>
	| 
		site uv:<span id="busuanzi_value_site_uv_m"></span>
	<br>
	鲁ICP备20007116号
	<br>
	Powered by Hugo | Theme - <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
	
	<br>
	
	
	&copy;
		
		2021 ALL RIGHTS RESERVED KRIS NIE
		
	<script>
		$(function(){
			$("#busuanzi_value_site_uv").bind('DOMNodeInserted',function(e){
				console.log('DOMNodeInserted');
				debugger;
				$('#busuanzi_value_site_uv_m').after($('#busuanzi_value_site_uv').text()); 
				$('#busuanzi_value_site_pv_m').after($('#busuanzi_value_site_pv').text());
			});
		})
	</script>
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
