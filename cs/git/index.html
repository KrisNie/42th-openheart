<!DOCTYPE html>
<html><head>
<title>Git</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="git">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link rel="shortcut icon" href="/images/smile_favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">



<meta property="og:title" content="Git" />
<meta property="og:description" content="git" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.openheart.icu/cs/git/" />
<meta property="article:published_time" content="2020-07-15T23:28:00+00:00" />
<meta property="article:modified_time" content="2020-07-15T23:28:00+00:00" /><meta property="og:site_name" content="My Blog" />





<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git"/>
<meta name="twitter:description" content="git"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  






<link rel="stylesheet" href="https://www.openheart.icu/scss/journal.min.501d7307b277cc4885da27e54d8eb3a01eb04a3eb1539d4db0f640bad47a803c.css" integrity="sha256-UB1zB7J3zEiF2iflTY6zoB6wSj6xU51NsPZAutR6gDw=" media="screen">



<link rel="stylesheet" href="https://www.openheart.icu/scss/dark-mode.min.7757e4001197b1cd1c03bf75eeef947c882e0bbc26b5096a3c1a66992f55521a.css" integrity="sha256-d1fkABGXsc0cA7917u&#43;UfIguC7wmtQlqPBpmmS9VUho=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
  clientID: '78028e4d522031d4773c',
  clientSecret: 'e387ce8646bde4df55f81e9dc6c1e72b91248d82',
  repo: '42th-openheart',
  owner: 'KrisNie',
  admin: ['KrisNie'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>












</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://www.openheart.icu/">
    
        <div class="nav-title">
            42th openheart
        </div>
        
        <div class="nav-subtitle">
            Kris Nie&#39;s Blog.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/arithmetic">
                Arithmetic
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/cs">
                ComputerScience
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/dotnet">
                DotNet
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/finance">
                Finance
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/speech">
                Speech
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                About
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        


<i class="fa fa-weixin" aria-hidden="true"></i>
QuadragintaDuo
<br>
<i class="fa fa-envelope" aria-hidden="true"></i>
krisnie42@qq.com
<br>
<span id="busuanzi_container_site_pv">
    site pv:<span id="busuanzi_value_site_pv"></span>
</span>
| 
<span id="busuanzi_container_site_uv">
	site uv:<span id="busuanzi_value_site_uv"></span>
</span>
<br>
<a href="https://beian.miit.gov.cn/">鲁ICP备20007116号-1</a>
<br>
Powered by Hugo | Theme - <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>

<br>


&copy;
	
	2021 ALL RIGHTS RESERVED KRIS NIE
	


    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#common-operation" onclick="onNavClick(`#common-operation-nav`)" id="common-operation-nav">
									Common Operation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#issues" onclick="onNavClick(`#issues-nav`)" id="issues-nav">
									Issues
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#whats-the-use-of-the-staging-area-in-githttpsstackoverflowcomquestions49228209whats-the-use-of-the-staging-area-in-git" onclick="onNavClick(`#whats-the-use-of-the-staging-area-in-githttpsstackoverflowcomquestions49228209whats-the-use-of-the-staging-area-in-git-nav`)" id="whats-the-use-of-the-staging-area-in-githttpsstackoverflowcomquestions49228209whats-the-use-of-the-staging-area-in-git-nav">
									What’s the use of the staging area in Git?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#auto-packing-the-repository-for-optimum-performancehttpsstackoverflowcomquestions8633981what-does-auto-packing-the-repository-for-optimum-performance-mean" onclick="onNavClick(`#auto-packing-the-repository-for-optimum-performancehttpsstackoverflowcomquestions8633981what-does-auto-packing-the-repository-for-optimum-performance-mean-nav`)" id="auto-packing-the-repository-for-optimum-performancehttpsstackoverflowcomquestions8633981what-does-auto-packing-the-repository-for-optimum-performance-mean-nav">
									Auto packing the repository for optimum performance
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/arithmetic">
                    Arithmetic
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/cs">
                    ComputerScience
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/dotnet">
                    DotNet
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/finance">
                    Finance
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/speech">
                    Speech
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    About
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#common-operation" onclick="onNavClick(`#common-operation-nav`)" id="common-operation-nav">
									Common Operation
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#issues" onclick="onNavClick(`#issues-nav`)" id="issues-nav">
									Issues
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#whats-the-use-of-the-staging-area-in-githttpsstackoverflowcomquestions49228209whats-the-use-of-the-staging-area-in-git" onclick="onNavClick(`#whats-the-use-of-the-staging-area-in-githttpsstackoverflowcomquestions49228209whats-the-use-of-the-staging-area-in-git-nav`)" id="whats-the-use-of-the-staging-area-in-githttpsstackoverflowcomquestions49228209whats-the-use-of-the-staging-area-in-git-nav">
									What’s the use of the staging area in Git?
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#auto-packing-the-repository-for-optimum-performancehttpsstackoverflowcomquestions8633981what-does-auto-packing-the-repository-for-optimum-performance-mean" onclick="onNavClick(`#auto-packing-the-repository-for-optimum-performancehttpsstackoverflowcomquestions8633981what-does-auto-packing-the-repository-for-optimum-performance-mean-nav`)" id="auto-packing-the-repository-for-optimum-performancehttpsstackoverflowcomquestions8633981what-does-auto-packing-the-repository-for-optimum-performance-mean-nav">
									Auto packing the repository for optimum performance
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://www.openheart.icu/">
            42th openheart
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://www.openheart.icu/">
        <div class="single-column-header-title">42th openheart</div>
        
        <div class="single-column-header-subtitle">Kris Nie&#39;s Blog.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    Git
                    
                    <div class="post-subtitle">
                        git
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-07-15 23:28
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/technical">Technical</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/operation">Operation</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            3 min
                            
                            39 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="common-operation">Common Operation</h1>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#228b22"># 遇到pull不下来</span>
git reset --hard FETCH_HEAD
git clone  https://www.github.com/XXXX/XXX.git

<span style="color:#228b22"># 修改邮箱</span>
git config --global user.name <span style="color:#cd5555">&#34;Kris Nie&#34;</span>
git config --global user.email krisnie@qq.com

<span style="color:#228b22"># Commit undo</span>
git reset HEAD~ <span style="color:#228b22">#只undo最后一次</span>
git reflog <span style="color:#228b22">#显示所有操作</span>
git reset d0988e7a0d

<span style="color:#228b22"># delete commit</span>
git reset --soft HEAD~1 <span style="color:#228b22"># 保留修改</span>
git reset --hard HEAD~1 <span style="color:#228b22"># 不保留修改</span>
git push origin mybranch --force <span style="color:#228b22"># 强制推送到远端</span>

<span style="color:#228b22"># delete branch</span>
git branch -d mybranch
git branch -D mybranch <span style="color:#228b22"># delete force</span>
git remote prune origin <span style="color:#228b22"># automatically get rid of remote branches that no longer exist on the remote</span>
git push origin --delete mybranch <span style="color:#228b22"># delete remote branch</span>
git push origin :mybranch <span style="color:#228b22"># delete remote branch</span>

<span style="color:#228b22"># update commit after git push</span>
git commit --amend <span style="color:#228b22"># 进入vim修改 修改完成后:wq 保存</span>
git push --force-with-lease origin mybranch <span style="color:#228b22">#强制修改</span>

git fetch origin <span style="color:#228b22"># 如果有人已经pull了未修改前的</span>
git reset --hard origin/branch <span style="color:#228b22"># 本地端的修改會不見</span>

<span style="color:#228b22"># Stash changes</span>
git stash pop
git stash list

<span style="color:#228b22"># Operate Commit</span>
git rebase -i Head~3 <span style="color:#228b22"># it will open a vim for u, i to insert, wq to save</span>

<span style="color:#228b22"># Change repositories URL</span>
git remote -v <span style="color:#228b22"># show yoru remote URL</span>
git remote set-url origin ssh://git@XXX.com/XXX/XXX.git <span style="color:#228b22"># reset your remote URL</span>

git mv -f .<span style="color:#cd5555">\a</span>bc.js  .<span style="color:#cd5555">\A</span>BC.js <span style="color:#228b22"># rename</span>

git clean -f -d -X <span style="color:#228b22"># remove ignored files, untracked files and directories</span>

git show --pretty=fuller commit_id <span style="color:#228b22"># View Author&amp;Authordate&amp;Commit&amp;CommitDate </span>

<span style="color:#228b22"># Submodule</span>
git submodule sync --recursive <span style="color:#228b22"># Server does not allow request for unadvertised object</span>
git submodule init
git submodule add https://github.com/***/***
git submodule update

<span style="color:#228b22"># Git Proxy</span>
<span style="color:#228b22"># http</span>
git config --global https.proxy http://127.0.0.1:1080
git config --global https.proxy https://127.0.0.1:1080

<span style="color:#228b22"># socks5</span>
git config --global http.proxy <span style="color:#cd5555">&#39;socks5://127.0.0.1:1080&#39;</span>
git config --global https.proxy <span style="color:#cd5555">&#39;socks5://127.0.0.1:1080&#39;</span>

<span style="color:#228b22"># 取消代理</span>
git config --global --unset http.proxy
git config --global --unset https.proxy

npm config delete proxy

<span style="color:#228b22">## Where is Git</span>
which git <span style="color:#228b22"># Mac</span>
where git <span style="color:#228b22"># Windows</span>
where.exe git.exe <span style="color:#228b22">#powershell</span>

<span style="color:#228b22"># Stop packing</span>
git fsck
git gc --prune=now
</code></pre></div><h1 id="issues">Issues</h1>
<h2 id="whats-the-use-of-the-staging-area-in-githttpsstackoverflowcomquestions49228209whats-the-use-of-the-staging-area-in-git"><a href="https://stackoverflow.com/questions/49228209/whats-the-use-of-the-staging-area-in-git">What&rsquo;s the use of the staging area in Git?</a></h2>
<ol>
<li>staging helps you split up one large change into multiple commits</li>
<li>staging helps in reviewing changes</li>
<li>staging helps when a merge has conflicts</li>
<li>staging helps you keep extra local files hanging around</li>
<li>staging helps you sneak in small changes</li>
</ol>
<h3 id="auto-packing-the-repository-for-optimum-performancehttpsstackoverflowcomquestions8633981what-does-auto-packing-the-repository-for-optimum-performance-mean"><a href="https://stackoverflow.com/questions/8633981/what-does-auto-packing-the-repository-for-optimum-performance-mean">Auto packing the repository for optimum performance</a></h3>
<blockquote>
<p>Short version: it means what it says, and if you just let it finish, all will be well.</p>
<p>During most operations which can potentially increase the number of loose (unpacked) objects in the repository (including pushes), Git invokes <code>git gc --auto</code>. If there are enough loose objects (by default, at least 6700), it will then invoke <code>git repack -d -l</code> to pack them. If there are too many separate packs, it will also repack them into one.</p>
<p>A pack is a delta-compressed single file, containing a large number of objects. It&rsquo;s more efficient to store objects in packs, but it takes time to pack (compress) objects, so Git initially creates loose objects, then packs them in batches now and then, via automatic invocation of <code>git gc --auto</code>.</p>
<p><strong>If you let Git finish repacking, this won&rsquo;t happen again for a while.</strong> It can indeed take a while, especially if you have a lot of large binary objects, but if it&rsquo;s triggering, then it&rsquo;s a sign that it will probably drastically reduce the amount of disk space taken by the repo. If you really don&rsquo;t want it to happen, you can change the config parameter <code>gc.auto</code>. If you increase it to something much larger than 6700, it will happen less frequently, but take longer when it does. If you decrease it, it&rsquo;ll still have to do your current repack, but subsequently it will happen more often and finish more quickly. If you set it to 0, it will disable automatic repacking.</p>
<p>See <code>man git-gc</code> (under <code>--auto</code>) and <code>man git-config</code> (under <code>gc.auto</code>) for more information.</p>
</blockquote>
<blockquote>
<p>While Jefroni is correct that sometimes the auto-packing just needs time to complete, if the auto-packing message persists over multiple days as OP describes, there&rsquo;s a good chance that git&rsquo;s cleanup is missing dangling objects, as described in <a href="https://stackoverflow.com/questions/28633956/why-does-git-keep-telling-me-its-auto-packing-the-repository-in-background-for">this question</a>.</p>
<p>To see whether dangling objects are triggering ongoing messages about auto-packing, try running <code>git fsck</code>. If you get a long list of dangling commits, you can clean them with</p>
<pre><code>git gc --prune=now
</code></pre><p>I usually have to run this on my repo every 2-3 months when the auto-packing message doesn&rsquo;t go away after a single pull.</p>
</blockquote>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">Last modified on 2020-07-15</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://www.openheart.icu/cs/computer-network/">
			Next<br>Computer network
                </a>
                
                
                
                <a class="older-posts" href="https://www.openheart.icu/cs/hugo/">
			Previous<br>Hugo
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>









            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
	
	<i class="fa fa-weixin" aria-hidden="true"></i>
	QuadragintaDuo
	<br>
	<i class="fa fa-envelope" aria-hidden="true"></i>
	krisnie42@qq.com
	<br>
		site pv:<span id="busuanzi_value_site_pv_m"></span>
	| 
		site uv:<span id="busuanzi_value_site_uv_m"></span>
	<br>
	鲁ICP备20007116号
	<br>
	Powered by Hugo | Theme - <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
	
	<br>
	
	
	&copy;
		
		2021 ALL RIGHTS RESERVED KRIS NIE
		
	<script>
		$(function(){
			$("#busuanzi_value_site_uv").bind('DOMNodeInserted',function(e){
				console.log('DOMNodeInserted');
				debugger;
				$('#busuanzi_value_site_uv_m').after($('#busuanzi_value_site_uv').text()); 
				$('#busuanzi_value_site_pv_m').after($('#busuanzi_value_site_pv').text());
			});
		})
	</script>
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
